<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Xavier Nayrac]]></title>
  <link href="http://lkdjiin.github.io/atom.xml" rel="self"/>
  <link href="http://lkdjiin.github.io/"/>
  <updated>2015-06-08T16:13:15+02:00</updated>
  <id>http://lkdjiin.github.io/</id>
  <author>
    <name><![CDATA[Xavier Nayrac]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[R : rep vs replicate]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/06/08/r-rep-vs-replicate/"/>
    <updated>2015-06-08T15:45:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/06/08/r-rep-vs-replicate</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>Nouveau venu en R, je découvre régulièrement des nouvelles fonctions qui me
simplifie la vie. Comme par exemple la fonction <code>replicate</code> dont je vais
parler aujourd’hui.</p>

<p>Partons de l’hypothèse que je veuille générer plusieurs nombres aléatoires de
1 à 10. Pour ceci je dispose de la fonction <code>random</code> suivante, qui produit
justement un nombre aléatoire entre 1 et 10 :</p>

<!-- more -->

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">random <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  sample<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span> size<span class="o">=</span><span class="m">1</span><span class="p">)</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line">random<span class="p">()</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">5</span>
</span><span class="line">
</span><span class="line">random<span class="p">()</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Comment faire pour obtenir <em>n</em> nombres aléatoires en utilisant cette fonction ?
Mettons quatre nombres. Si je me sers de <code>rep</code>, je vais avoir quelques
surprises :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">rep<span class="p">(</span>random<span class="p">(),</span> <span class="m">4</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">8</span> <span class="m">8</span> <span class="m">8</span> <span class="m">8</span>
</span><span class="line">
</span><span class="line">rep<span class="p">(</span>random<span class="p">(),</span> <span class="m">4</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">2</span> <span class="m">2</span> <span class="m">2</span> <span class="m">2</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>En effet, l’appel à <code>random()</code> est fait avant la répétition, j’obtiens donc
quatre fois la même valeur.</p>

<p>Pour résoudre ce problème, je peux utiliser la fonction <code>replicate</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">replicate<span class="p">(</span><span class="m">4</span><span class="p">,</span> random<span class="p">())</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="m">3</span>  <span class="m">6</span> <span class="m">10</span>  <span class="m">3</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ça fonctionne car cette fois <code>random()</code> est appelé pour chacune des
répétitions.</p>

<p>Pour la petite histoire, <code>replicate</code> est un cas spécial de la fonction plus
générale <code>sapply</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">sapply<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> random<span class="p">())</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">10</span>  <span class="m">4</span>  <span class="m">2</span>  <span class="m">1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Dans ce cas d’utilisation précis <code>replicate</code> est plus confortable à utiliser,
puisque cette méthode évite de générer un vecteur inutile (<code>1:4</code>) et de passer par une fonction anonyme qui n’utilise pas son argument.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/04/23/3-reglages-pour-le-langage-r/">3 réglages pour le langage R</a></li><li><a href="http://lkdjiin.github.io/blog/2015/04/09/les-sous-ensembles-de-listes-dans-r/">Les sous-ensembles de listes dans R</a></li><li><a href="http://lkdjiin.github.io/blog/2015/04/07/les-sous-ensembles-dans-r/">Les sous-ensembles dans R</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Classons les développeurs selon le nombre de parenthèses utilisées]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/06/06/classons-les-developpeurs-selon-le-nombre-de-parentheses-utilisees/"/>
    <updated>2015-06-06T10:25:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/06/06/classons-les-developpeurs-selon-le-nombre-de-parentheses-utilisees</id>
    <content type="html"><![CDATA[<p>Depuis quelques mois je vois passer ici et là plusieurs «classements des
développeurs».  Plutôt que de dire ce que je pense de ces
classements, je voudrais en rire un peu en proposant une nouvelle méthode de
classification.</p>

<p><strong>Et si on se mettait à juger notre code par le nombre de parenthèses inutiles
qu’il produit ?</strong></p>

<!-- more -->

<p>Petite histoire inventée : <em>Un jour j’ai passé 3 heures à trouver un bug causé
par des parenthèses manquantes. Depuis, je m’assure que cela n’arrivera plus
jamais, quitte à ce que personne (pas même moi d’ailleurs) puisse me relire.</em></p>

<p>En R par exemple :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># Quand j&#39;ai décidé que je réfléchirai demain.</span>
</span><span class="line">data<span class="p">[((</span>data<span class="o">$</span>var1 <span class="o">&lt;</span> <span class="m">3</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span>data<span class="o">$</span>var2 <span class="o">&gt;</span> <span class="m">11</span><span class="p">)),</span> <span class="p">]</span>
</span><span class="line">
</span><span class="line"><span class="c1"># Quand je suis en forme, mais pas trop quand même.</span>
</span><span class="line">data<span class="p">[(</span>data<span class="o">$</span>var1 <span class="o">&lt;</span> <span class="m">3</span> <span class="o">&amp;</span> data<span class="o">$</span>var2 <span class="o">&gt;</span> <span class="m">11</span><span class="p">),</span> <span class="p">]</span>
</span><span class="line">
</span><span class="line"><span class="c1"># Bon, là, ça va.</span>
</span><span class="line">data<span class="p">[</span>data<span class="o">$</span>var1 <span class="o">&lt;</span> <span class="m">3</span> <span class="o">&amp;</span> data<span class="o">$</span>var2 <span class="o">&gt;</span> <span class="m">11</span><span class="p">,</span> <span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>À plus tard pour un article plus sérieux ;) Peut-être sur la
précédence des opérateurs ?!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Le système binaire]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/06/04/le-systeme-binaire/"/>
    <updated>2015-06-04T13:55:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/06/04/le-systeme-binaire</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>J’ai appris l’algèbre de Boole au lycée, j’ai programmé en assembleur très tôt,
j’ai donc de bonnes raisons de connaître le binaire ; ce truc fait en quelque
sorte partie de moi.  Par expérience, je sais que certains développeurs manque
de connaissances dans le domaine, mais pas pour autant de curiosité.  Alors si
vous n’êtes pas sûr de savoir ce qu’est vraiment le système binaire, continuez
la lecture…</p>

<p><img class="center" src="http://lkdjiin.github.io/images/one-plus-one.png" /></p>

<!-- more -->

<p><strong>Le système binaire est une manière de compter</strong>, tout comme le système
décimal que vous connaissez bien. Sauf qu’au lieu de compter en se basant sur
le nombre 10 (on dit aussi «compter en base dix»), on compte avec une base
deux. Le système décimal et le système binaire ne sont pas les seuls systèmes
de «comptage» existants, loin de là. Vous connaissez (et utilisez) d’autres
systèmes, comme le système en base 60 pour compter les secondes et les minutes
et le système en base 24 pour compter les heures.  Tout ça pour dire et redire
qu’<strong>il n’y a absolument rien de bizarre à compter autrement qu’en base 10</strong>.</p>

<p>Pourquoi, alors, le système décimal nous semble être <em>LE</em> système de référence ?
Et pourquoi 10, d’ailleurs ? Certainement parce qu’<strong>on a dix doigts</strong>, il est
donc naturel de prendre 10 comme base. Mais si nous rencontrions des
extra-terrestres à 8 doigts, il y a fort à parier que leur système <em>naturel</em>
serait en base 8.</p>

<p>Le système décimal possède dix symboles, qui représentent chacun une valeur que
j’appellerai <em>unitaire</em> : 0, 1, 2, 3, 4, 5, 6, 7, 8 et 9. Ces symboles peuvent
se combiner à l’infini pour représenter d’autres valeurs. <strong>C’est pareil pour
les autres systèmes</strong>, ils représentent un certain nombre de valeurs en utilisant
des symboles :</p>

<pre><code>Système     | # de symboles | Symboles
-------------------------------------------------------------
hexadécimal | 16            | 0 1 2 3 4 5 6 7 8 9 A B C D E F
décimal     | 10            | 0 1 2 3 4 5 6 7 8 9
octal       |  8            | 0 1 2 3 4 5 6 7
binaire     |  2            | 0 1
</code></pre>

<p>Le système binaire doit représenter seulement deux valeurs.  On utilise
généralement des 1 et des 0, mais on pourrait exprimer/symboliser ces valeurs
par n’importe quoi d’autre : vrai et faux, 5 volts et 0 volts, oui et non,
rouge et vert, allumé et éteint, haut et bas, etc.</p>

<p>Pourquoi a-t-on besoin d’un système avec seulement deux valeurs ?
<strong>i)</strong> parce que ça représente bien <strong>la logique</strong> : ceci <em>OU</em> cela, ceci <em>ET</em> cela.
<strong>ii)</strong> parce que c’est le système de comptage <strong>le plus simple</strong> (du moins pour une machine) et que simplicité est généralement synonyme d’efficacité.</p>

<p>Pour illustrer ce dernier point, et terminer cet article d’introduction au
système binaire — <em>j’espère qu’il y en aura plein d’autres</em> —  voici le
résultat de l’opération logique 1 OU 1, et celui de l’addition de 1 + 1 :</p>

<pre><code>1 OU 1 = 1
1  + 1 = 10
</code></pre>

<p>Pour comprendre comment tout cela fonctionne, rendez-vous dans les prochains
articles.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/05/02/comment-convertir-un-nombre-decimal-en-binaire-en-bash/">Comment convertir un nombre décimal en binaire en Bash ?</a></li><li><a href="http://lkdjiin.github.io/blog/2015/06/08/r-rep-vs-replicate/">R : rep vs replicate</a></li><li><a href="http://lkdjiin.github.io/blog/2015/05/23/hacker-la-classe-fixnum/">Hacker la classe Fixnum</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hacker la classe Fixnum]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/05/23/hacker-la-classe-fixnum/"/>
    <updated>2015-05-23T08:48:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/05/23/hacker-la-classe-fixnum</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<h2 id="ou-les-classes-ouvertes-en-ruby">Ou les classes ouvertes en Ruby</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="mi">1</span><span class="o">.</span><span class="n">hour_in_minutes</span> <span class="c1">#=&gt; 60</span>
</span><span class="line">
</span><span class="line"><span class="mi">37</span><span class="o">.</span><span class="n">celsius_in_farenheit</span> <span class="c1">#=&gt; 0</span>
</span><span class="line">
</span><span class="line"><span class="mi">2</span><span class="o">.</span><span class="n">dozens</span> <span class="c1">#=&gt; 24</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>C’est un aspect du langage que tous les rubyistes confirmés connaissent, mais
il est toujours utile d’en reparler pour les plus novices : En Ruby, même les
classes dites <em>système</em> peuvent être redéfinies, modifiées, augmentées, pliées
à vos besoins.</p>

<p>En un mot, on dit que les classes restent <strong>ouvertes</strong>.</p>

<p><img class="center" src="http://lkdjiin.github.io/images/open-640.jpg" /></p>

<!-- more -->

<p>Si je veux par exemple pouvoir transformer les nombres entiers en <em>bytes</em> et en
<em>words</em>, je peux écrire les méthodes <code>to_bytes</code> et <code>to_words</code>.</p>

<blockquote>
  <p>Un byte = un octet  <br />
Un word = deux octets</p>
</blockquote>

<p>Voici ces méthodes simples, définies dans une session irb :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">to_bytes</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span class="line"><span class="gp">&gt;&gt; </span>  <span class="n">number</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">to_words</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span class="line"><span class="gp">&gt;&gt; </span>  <span class="n">number</span> <span class="o">*</span> <span class="mi">2</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
</span><span class="line"><span class="go">11</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="n">to_words</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
</span><span class="line"><span class="go">22</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ça fonctionne très bien mais 1) ça n’est pas très <em>orienté objet</em>, et 2) ça
n’est pas très <em>ruby</em>. Plutôt que <code>to_words(11)</code>, on écrirait plus volontiers
<code>11.words</code>, c’est quand même plus classe (oh le jeu de mot à deux balles).</p>

<p>En parlant de classe justement, voyons quelle est la classe d’un nombre entier :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="gp">&gt;&gt; </span><span class="mi">123</span><span class="o">.</span><span class="n">class</span>
</span><span class="line"><span class="go">Fixnum &lt; Integer</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>C’est tout ce qu’il nous faut savoir pour <em>augmenter</em> les nombres entiers avec
nos propres méthodes <code>byte</code>, <code>bytes</code>, <code>word</code> et <code>words</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Fixnum</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">byte</span>
</span><span class="line">    <span class="nb">self</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">  <span class="n">alias_method</span> <span class="ss">:bytes</span><span class="p">,</span> <span class="ss">:byte</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">word</span>
</span><span class="line">    <span class="mi">2</span> <span class="o">*</span> <span class="nb">self</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">  <span class="n">alias_method</span> <span class="ss">:words</span><span class="p">,</span> <span class="ss">:word</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Comme vous pouvez le constater, j’ai <em>ouvert</em> la classe Fixnum pour y ajouter
mes méthodes. Je rappelle que <code>self</code> est l’objet courant.</p>

<p>Si vous ne savez pas ce qu’est ce <code>alias_method</code>, dites vous que ceci :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line">  <span class="k">def</span> <span class="nf">word</span>
</span><span class="line">    <span class="mi">2</span> <span class="o">*</span> <span class="nb">self</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">  <span class="n">alias_method</span> <span class="ss">:words</span><span class="p">,</span> <span class="ss">:word</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>est équivalent à cela :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line">  <span class="k">def</span> <span class="nf">word</span>
</span><span class="line">    <span class="mi">2</span> <span class="o">*</span> <span class="nb">self</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">words</span>
</span><span class="line">    <span class="n">word</span>
</span><span class="line">  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Et voilà :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="mi">1</span><span class="o">.</span><span class="n">byte</span>  <span class="c1">#=&gt; 1</span>
</span><span class="line"><span class="mi">2</span><span class="o">.</span><span class="n">bytes</span> <span class="c1">#=&gt; 2</span>
</span><span class="line"><span class="mi">1</span><span class="o">.</span><span class="n">word</span>  <span class="c1">#=&gt; 2</span>
</span><span class="line"><span class="mi">3</span><span class="o">.</span><span class="n">words</span> <span class="c1">#=&gt; 6</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>Edit du 5 juin 2015</strong> J’ai oublié de mentionner que l’utilisation des classes
ouvertes est sujet à controverse parmi les rubyistes. Trop de <em>monkey
patching</em> (l’autre nom pas très gentil des classes ouvertes) peut
effectivement rendre une gem compliquée ou délicate à utiliser en commun
avec d’autres gems. Comme toujours, je pense que c’est une histoire de
compromis et de «ça dépend». Notez que depuis Ruby 2.0 il existe une
alternative au <em>monkey patching</em> : <a href="http://lkdjiin.github.io/blog/2013/10/10/ruby-2-dot-0-raffinement-de-methode/">le raffinement de méthode</a>.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/05/02/comment-convertir-un-nombre-decimal-en-binaire-en-bash/">Comment convertir un nombre décimal en binaire en Bash ?</a></li><li><a href="http://lkdjiin.github.io/blog/2015/03/28/pas-de-logique-dans-les-vues-rails/">Pas de logique dans les vues Rails</a></li><li><a href="http://lkdjiin.github.io/blog/2015/02/05/une-machine-de-turing-en-ruby-une-bande-de-donnees-infinie/">Une machine de Turing en Ruby - Une bande de données infinie</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Créer plusieurs fichiers en Bash]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/05/15/creer-plusieurs-fichiers-en-bash/"/>
    <updated>2015-05-15T13:46:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/05/15/creer-plusieurs-fichiers-en-bash</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p><em>Faire deux fois la même chose, c’est une coincidence ; faire
trois fois la même chose, c’est déjà deux de trop.</em></p>

<p>Mettons que j’ai besoin de créer 20 fichiers quelconques (ici en Ruby) nommés ainsi :</p>

<ul>
  <li><code>asm01.rb</code></li>
  <li><code>asm02.rb</code></li>
  <li><code>asm03.rb</code></li>
  <li>etcétéra jusqu’à <code>asm20.rb</code></li>
</ul>

<!-- more -->

<p>Je peux les créer les uns après les autres de cette manière :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>touch lib/c8dasm/assemblies/asm01.rb
</span><span class="line"><span class="nv">$ </span>touch lib/c8dasm/assemblies/asm02.rb
</span><span class="line"><span class="nv">$ </span>touch lib/c8dasm/assemblies/asm03.rb
</span><span class="line"><span class="nv">$ </span><span class="c"># même chose jusqu&#39;à :</span>
</span><span class="line"><span class="nv">$ </span>touch lib/c8dasm/assemblies/asm20.rb
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Imaginez si vous deviez en faire 200 comme cela ! Et même s’il n’y en avait que
10, c’est juste ennuyeux au possible. En tant que développeurs, <strong>nous devrions
apprendre à automatiser ces tâches pour notre confort</strong>.</p>

<p>On peut utiliser une boucle pour résoudre ce problème :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="k">for </span>i in <span class="o">{</span>01..20<span class="o">}</span>; <span class="k">do</span>
</span><span class="line">… &gt; touch lib/c8dasm/assemblies/asm<span class="nv">$i</span>.rb
</span><span class="line">… &gt; <span class="k">done</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ou bien la version sur une seule ligne :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="k">for </span>i in <span class="o">{</span>01..20<span class="o">}</span>; <span class="k">do </span>touch lib/c8dasm/assemblies/asm<span class="nv">$i</span>.rb; <span class="k">done</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>À bientôt.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/05/02/comment-convertir-un-nombre-decimal-en-binaire-en-bash/">Comment convertir un nombre décimal en binaire en Bash ?</a></li><li><a href="http://lkdjiin.github.io/blog/2014/05/01/la-balise-hr-dans-votre-console/">La balise hr dans votre console</a></li><li><a href="http://lkdjiin.github.io/blog/2014/04/06/comment-reduire-les-erreurs-de-frappe-dans-la-console/">Comment réduire les erreurs de frappe dans la console</a></li></ul></section>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Un exemple de polymorphisme en situation réelle]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/05/14/un-exemple-de-polymorphisme-en-situation-reelle/"/>
    <updated>2015-05-14T19:16:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/05/14/un-exemple-de-polymorphisme-en-situation-reelle</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-3">Niveau : <span>avancé</span></div>

<p>J’écris en ce moment un <a href="http://fr.wikipedia.org/wiki/%C3%89mulation">émulateur</a>
pour <a href="http://fr.wikipedia.org/wiki/CHIP-8">Chip-8</a>, en Ruby. Dans les outils que
j’écris à coté il y a un <a href="http://fr.wikipedia.org/wiki/D%C3%A9sassembleur">désassembleur</a> de code Chip-8. Dans ce
désassembleur il y a un bel exemple de polymorphisme.</p>

<!-- more -->

<h2 id="un-peu-de-contexte">Un peu de contexte</h2>

<p>La classe Opcode permet de faire la correspondance entre un <a href="http://fr.wikipedia.org/wiki/Langage_machine#Opcode">opcode</a> Chip-8
et une ligne de code assembleur. Un opcode Chip-8 est toujours représenté par
un nombre <a href="http://fr.wikipedia.org/wiki/Syst%C3%A8me_hexad%C3%A9cimal">hexadécimal</a> de 4 chiffres.</p>

<p>Voici quelques exemples d’opcodes et leur correspondance en assembleur :</p>

<pre><code>Opcode | Assembleur  | Remarque
-------|-------------|---------
2a00   | CALL a00    |
7012   | ADD V0, 12  | V0 est un registre
a22e   | LOAD I, 22e | I est un registre
</code></pre>

<p>On pourra remarquer (même si ça n’est pas ultra visible avec seulement trois
exemples) que c’est le premier chiffre (ici <code>2</code>, <code>7</code> et <code>a</code>) qui décide du
type d’instruction.</p>

<p>De <code>0</code> à <code>f</code>, on a donc 16 types possibles, ce qui donne ce genre de code :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>opcode.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Opcode</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">opcode</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@opcode</span> <span class="o">=</span> <span class="n">opcode</span>
</span><span class="line">    <span class="vi">@assembly</span> <span class="o">=</span> <span class="n">compute_assembly</span>
</span><span class="line">    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">
</span><span class="line">  <span class="kp">private</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">compute_assembly</span>
</span><span class="line">    <span class="k">case</span> <span class="vi">@opcode</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;0&#39;</span> <span class="k">then</span> <span class="s2">&quot;Return this code&quot;</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;1&#39;</span> <span class="k">then</span> <span class="s2">&quot;Return that code&quot;</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;2&#39;</span> <span class="k">then</span> <span class="c1"># ...</span>
</span><span class="line">    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;d&#39;</span> <span class="k">then</span> <span class="c1"># ...</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;e&#39;</span> <span class="k">then</span> <span class="c1"># ...</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;f&#39;</span> <span class="k">then</span> <span class="c1"># ...</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>De plus, certains type d’instruction sont partagés en sous type, selon le
quatrième chiffre, ou bien selon les troisième et quatrième, ça dépend. Comme
toujours, on se retrouve à devoir gérer des cas particuliers, et le code
ressemble rapidement à la monstruosité qui suit :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">def</span> <span class="nf">compute_assembly</span>
</span><span class="line">  <span class="k">case</span> <span class="vi">@opcode</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;0&#39;</span>
</span><span class="line">    <span class="k">if</span> <span class="vi">@opcode</span> <span class="o">==</span> <span class="s1">&#39;00e0&#39;</span>
</span><span class="line">      <span class="c1"># do that</span>
</span><span class="line">    <span class="k">elsif</span> <span class="vi">@opcode</span> <span class="o">==</span> <span class="s1">&#39;00ee&#39;</span>
</span><span class="line">      <span class="c1"># do that</span>
</span><span class="line">    <span class="k">else</span>
</span><span class="line">      <span class="c1"># do that</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;1&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;2&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;3&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;4&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;5&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;6&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;7&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;8&#39;</span>
</span><span class="line">    <span class="k">case</span> <span class="vi">@opcode</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;0&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;1&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;2&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;3&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;4&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;5&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;6&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;7&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">when</span> <span class="s1">&#39;e&#39;</span> <span class="k">then</span> <span class="c1"># do that</span>
</span><span class="line">    <span class="k">else</span>
</span><span class="line">      <span class="c1"># do that</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;9&#39;</span> <span class="k">then</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;a&#39;</span> <span class="k">then</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;b&#39;</span> <span class="k">then</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;c&#39;</span> <span class="k">then</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;d&#39;</span> <span class="k">then</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;e&#39;</span>
</span><span class="line">    <span class="c1"># Ici, encore 2 sous-groupes</span>
</span><span class="line">  <span class="k">when</span> <span class="s1">&#39;f&#39;</span>
</span><span class="line">    <span class="c1"># Ici, encore 10 autres sous-groupes</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>C’est pas bon, hein ? Pour arranger ça, rien de tel qu’un peu de polymorphisme.
La classe Opcode va donc se contenter de ceci :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Opcode</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Opcode</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">opcode</span><span class="p">)</span>
</span><span class="line">      <span class="n">asm</span> <span class="o">=</span> <span class="no">Assembly</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">opcode</span><span class="p">)</span>
</span><span class="line">      <span class="vi">@assembly</span> <span class="o">=</span> <span class="n">asm</span><span class="o">.</span><span class="n">to_s</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Vous devinez que c’est maintenant dans une nouvelle classe <code>Assembly</code> que sont géré les différentes
instructions et sous instructions :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Assembly</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Assembly</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">opcode</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@opcode</span> <span class="o">=</span> <span class="n">opcode</span>
</span><span class="line">    <span class="vi">@assembly</span> <span class="o">=</span> <span class="n">build_assembly</span><span class="o">.</span><span class="n">to_s</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">to_s</span>
</span><span class="line">    <span class="vi">@assembly</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="kp">private</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">build_assembly</span>
</span><span class="line">    <span class="n">klass</span> <span class="o">=</span> <span class="no">Kernel</span><span class="o">.</span><span class="n">const_get</span><span class="p">(</span><span class="s1">&#39;Asm&#39;</span> <span class="o">+</span> <span class="vi">@opcode</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">)</span>
</span><span class="line">    <span class="n">klass</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@opcode</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Et bien non, elles sont gérées chacune dans sa classe respective, à savoir
<code>Asm0</code>, <code>Asm1</code>, <code>Asm2</code>, et cetera jusqu’à <code>Asmf</code>. Voici un exemple :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>asm2.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Asm2</span> <span class="o">&lt;</span> <span class="no">AsmBase</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">to_s</span>
</span><span class="line">    <span class="s2">&quot;CALL </span><span class="si">#{</span><span class="n">nnn</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Chacune des classes <code>Asm0</code> à <code>Asmf</code> hérite de <code>AsmBase</code> qui définit le
comportement commun (nnn, kk, x et y sont simplement des conventions de nommage en
assembleur Chip-8) :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>asm_base.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">AsmBase</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">opcode</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@opcode</span> <span class="o">=</span> <span class="n">opcode</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">nnn</span>
</span><span class="line">    <span class="vi">@opcode</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">kk</span>
</span><span class="line">    <span class="vi">@opcode</span><span class="o">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">x</span>
</span><span class="line">    <span class="vi">@opcode</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">y</span>
</span><span class="line">    <span class="vi">@opcode</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>C’est un cas classique d’utilisation du polymorphisme. On troque
un long switch/case (virtuellement infini) pour plusieurs petites classes simples.
Le système est toujours aussi complexe dans son ensemble, mais sa maintenance
est maintenant plus facile.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2013/11/24/utiliser-vim-comme-un-tableur-sur-linux-enfin-presque/">Utiliser Vim comme un tableur sur Linux (enfin presque)</a></li><li><a href="http://lkdjiin.github.io/blog/2015/05/23/hacker-la-classe-fixnum/">Hacker la classe Fixnum</a></li><li><a href="http://lkdjiin.github.io/blog/2015/05/02/comment-convertir-un-nombre-decimal-en-binaire-en-bash/">Comment convertir un nombre décimal en binaire en Bash ?</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Comment convertir un nombre décimal en binaire en Bash ?]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/05/02/comment-convertir-un-nombre-decimal-en-binaire-en-bash/"/>
    <updated>2015-05-02T12:20:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/05/02/comment-convertir-un-nombre-decimal-en-binaire-en-bash</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>Pour convertir un nombre décimal en binaire, en Bash, suivez ce tweet :
<a href="https://twitter.com/climagic/status/593842202314420224">https://twitter.com/climagic/status/593842202314420224</a>.</p>

<p>Et voici la conversion du décimal 27 en son équivalent binaire :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ Dec2Bin</span><span class="o">=({</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">})</span>;<span class="nb">echo</span> <span class="k">${</span><span class="nv">Dec2Bin</span><span class="p">[27]</span><span class="k">}</span>
</span><span class="line">00011011
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Alors, comment ça marche ?</p>

<p><img class="center" src="http://lkdjiin.github.io/images/binary.jpg" /></p>

<!-- more -->

<p>Pour commencer, voici comment faire un tableau en bash, qui va contenir les 3
chaînes <code>foo</code>, <code>bar</code>, et <code>baz</code>. Ne soyez pas surpris par le manque de guillemets
autour des chaînes, Bash est fait pour traiter du texte.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ myarray</span><span class="o">=(</span>foo bar baz<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Et voici comment afficher le contenu de ce tableau.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">myarray</span><span class="p">[@]</span><span class="k">}</span>
</span><span class="line">foo bar baz
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>On peut bien sûr accéder aux éléments du tableau séparément :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">myarray</span><span class="p">[0]</span><span class="k">}</span>
</span><span class="line">foo
</span><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">myarray</span><span class="p">[1]</span><span class="k">}</span>
</span><span class="line">bar
</span><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">myarray</span><span class="p">[2]</span><span class="k">}</span>
</span><span class="line">baz
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Pour connaître la taille d’un tableau, voici la syntaxe :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${#</span><span class="nv">myarray</span><span class="p">[@]</span><span class="k">}</span>
</span><span class="line">3
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Appliquons ce nouveau savoir au tableau <code>Dec2Bin</code>, qui contient…</p>

<p>…</p>

<p>…des trucs :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ Dec2Bin</span><span class="o">=({</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">})</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Combien a-t-il d’éléments ?</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${#</span><span class="nv">Dec2Bin</span><span class="p">[@]</span><span class="k">}</span>
</span><span class="line">256
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>256 ? Et ça ressemble à quoi ?</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">Dec2Bin</span><span class="p">[@]</span><span class="k">}</span>
</span><span class="line">00000000 00000001 00000010 00000011 00000100 00000101 00000110 00000111 00001000
</span><span class="line">00001001 00001010 00001011 00001100 00001101 00001110 00001111 00010000 00010001
</span><span class="line">...
</span><span class="line">11101010 11101011 11101100 11101101 11101110 11101111 11110000 11110001 11110010
</span><span class="line">11110011 11110100 11110101 11110110 11110111 11111000 11111001 11111010 11111011
</span><span class="line">11111100 11111101 11111110 11111111
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Tranquille, <code>Dec2Bin</code> est un tableau qui contient 256 chaînes représentant les
nombres binaires de 0 à 255.</p>

<p>Les crochets <code>{}</code> créent un <em>range</em> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="o">{</span>0..1<span class="o">}</span>
</span><span class="line">0 1
</span><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="o">{</span>a..f<span class="o">}</span>
</span><span class="line">a b c d e f
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Plusieurs crochets <code>{}</code> les uns à la suite des autres produisent toutes les
permutations possibles :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="o">{</span>0..1<span class="o">}{</span>0..1<span class="o">}</span>
</span><span class="line">00 01 10 11
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Et on peut mettre tout ça dans un tableau :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ a</span><span class="o">=({</span>0..1<span class="o">})</span>
</span><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">a</span><span class="p">[@]</span><span class="k">}</span>
</span><span class="line">0 1
</span><span class="line"><span class="nv">$ a</span><span class="o">=({</span>0..1<span class="o">}{</span>0..1<span class="o">})</span>
</span><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">a</span><span class="p">[@]</span><span class="k">}</span>
</span><span class="line">00 01 10 11
</span><span class="line"><span class="nv">$ a</span><span class="o">=({</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">})</span>
</span><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">a</span><span class="p">[@]</span><span class="k">}</span>
</span><span class="line">000 001 010 011 100 101 110 111
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Et voilà, il faut encore savoir qu’ici, le point-virgule sert à joindre 2 lignes de
code en une seule :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ Dec2Bin</span><span class="o">=({</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">})</span>
</span><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="k">${</span><span class="nv">Dec2Bin</span><span class="p">[27]</span><span class="k">}</span>
</span><span class="line">00011011
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="bonus-1---le-mme-en-hexadcimal">Bonus 1 - Le même en hexadécimal</h2>

<p>Et si on voulait convertir un nombre décimal en hexadécimal plutôt qu’en
binaire ? Il faudrait générer toutes les permutations entre deux suites
<code>0 1 2 3 4 5 6 7 8 9 A B C D E F</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span><span class="nb">echo</span> <span class="o">{{</span>0..9<span class="o">}</span>,<span class="o">{</span>A..F<span class="o">}}{{</span>0..9<span class="o">}</span>,<span class="o">{</span>A..F<span class="o">}}</span>
</span><span class="line">00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F 10 11 12 13 14 15 16 17 18 19 1A
</span><span class="line">1B 1C 1D 1E 1F 20 21 22 23 24 25 26 27 28 29 2A 2B 2C 2D 2E 2F 30 31 32 33 34 35
</span><span class="line">36 37 38 39 3A 3B 3C 3D 3E 3F 40 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F 50
</span><span class="line">51 52 53 54 55 56 57 58 59 5A 5B 5C 5D 5E 5F 60 61 62 63 64 65 66 67 68 69 6A 6B
</span><span class="line">6C 6D 6E 6F 70 71 72 73 74 75 76 77 78 79 7A 7B 7C 7D 7E 7F 80 81 82 83 84 85 86
</span><span class="line">87 88 89 8A 8B 8C 8D 8E 8F 90 91 92 93 94 95 96 97 98 99 9A 9B 9C 9D 9E 9F A0 A1
</span><span class="line">A2 A3 A4 A5 A6 A7 A8 A9 AA AB AC AD AE AF B0 B1 B2 B3 B4 B5 B6 B7 B8 B9 BA BB BC
</span><span class="line">BD BE BF C0 C1 C2 C3 C4 C5 C6 C7 C8 C9 CA CB CC CD CE CF D0 D1 D2 D3 D4 D5 D6 D7
</span><span class="line">D8 D9 DA DB DC DD DE DF E0 E1 E2 E3 E4 E5 E6 E7 E8 E9 EA EB EC ED EE EF F0 F1 F2
</span><span class="line">F3 F4 F5 F6 F7 F8 F9 FA FB FC FD FE FF
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ Dec2Hex</span><span class="o">=({{</span>0..9<span class="o">}</span>,<span class="o">{</span>A..F<span class="o">}}{{</span>0..9<span class="o">}</span>,<span class="o">{</span>A..F<span class="o">}})</span>;<span class="nb">echo</span> <span class="k">${</span><span class="nv">Dec2Hex</span><span class="p">[27]</span><span class="k">}</span>
</span><span class="line">1B
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="bonus-2---le-mme-en-ruby">Bonus 2 - Le même en Ruby</h2>

<p>On peut faire la même chose en Ruby en utilisant <code>repeated_permutation</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="gp">&gt;&gt; </span><span class="o">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="o">].</span><span class="n">repeated_permutation</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">e</span><span class="o">.</span><span class="n">join</span><span class="p">}</span>
</span><span class="line"><span class="go">00000000</span>
</span><span class="line"><span class="go">00000001</span>
</span><span class="line"><span class="go">00000010</span>
</span><span class="line"><span class="go">00000011</span>
</span><span class="line"><span class="go">00000100</span>
</span><span class="line"><span class="go">00000101</span>
</span><span class="line"><span class="go">...</span>
</span><span class="line"><span class="go">11111010</span>
</span><span class="line"><span class="go">11111011</span>
</span><span class="line"><span class="go">11111100</span>
</span><span class="line"><span class="go">11111101</span>
</span><span class="line"><span class="go">11111110</span>
</span><span class="line"><span class="go">11111111</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Il peut-être intéressant de comparer les deux versions :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>ruby -e <span class="s2">&quot;puts [0,1].repeated_permutation(8).to_a[27].join&quot;</span>
</span><span class="line">00011011
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ Dec2Bin</span><span class="o">=({</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">}{</span>0..1<span class="o">})</span>;<span class="nb">echo</span> <span class="k">${</span><span class="nv">Dec2Bin</span><span class="p">[27]</span><span class="k">}</span>
</span><span class="line">00011011
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="bonus-3---encore-plus-court">Bonus 3 - Encore plus court</h2>

<p>Pour finir, on peut faire plus court avec Bash en utilisant <code>{0,1}</code> au lieu de
<code>{0..1}</code> puisqu’il y a seulement deux éléments :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ Dec2Bin</span><span class="o">=({</span>0,1<span class="o">}{</span>0,1<span class="o">}{</span>0,1<span class="o">}{</span>0,1<span class="o">}{</span>0,1<span class="o">}{</span>0,1<span class="o">}{</span>0,1<span class="o">}{</span>0,1<span class="o">})</span>;<span class="nb">echo</span> <span class="k">${</span><span class="nv">Dec2Bin</span><span class="p">[27]</span><span class="k">}</span>
</span><span class="line">00011011
</span></code></pre></td></tr></table></div></figure></notextile></div>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2013/12/22/remplacer-sed-et-awk-par-ruby-un-dernier-exemple/">Remplacer Sed et Awk par Ruby: Un dernier exemple</a></li><li><a href="http://lkdjiin.github.io/blog/2013/12/09/remplacer-sed-et-awk-par-ruby-8-script-sur-la-ligne-de-commande/">Remplacer Sed et Awk par Ruby 8: Script sur la ligne de commande</a></li><li><a href="http://lkdjiin.github.io/blog/2015/06/04/le-systeme-binaire/">Le système binaire</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Le hack FizzBuzz en Ruby]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/04/30/le-hack-fizzbuzz-en-ruby/"/>
    <updated>2015-04-30T17:07:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/04/30/le-hack-fizzbuzz-en-ruby</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-2">Niveau : <span>intermédiaire</span></div>

<p>Voici ce qui trainait sur le net aujourd’hui, un jeu de
<a href="http://en.wikipedia.org/wiki/Fizz_buzz">FizzBuzz</a> en une ligne de Ruby:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="mi">1</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">100</span><span class="p">){</span><span class="o">|</span><span class="n">n</span><span class="o">|</span><span class="nb">puts</span><span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[</span><span class="n">o</span><span class="o">=</span><span class="n">n</span><span class="o">**</span><span class="mi">4</span><span class="o">%-</span><span class="mi">15</span><span class="p">,</span><span class="n">o</span><span class="o">+</span><span class="mi">13</span><span class="o">]||</span><span class="n">n</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ce qui donne:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">ruby -e <span class="s2">&quot;1.upto(100){|n|puts&#39;FizzBuzz &#39;[o=n**4%-15,o+13]||n}&quot;</span>
</span><span class="line">1
</span><span class="line">2
</span><span class="line">Fizz
</span><span class="line">4
</span><span class="line">Buzz
</span><span class="line">Fizz
</span><span class="line">7
</span><span class="line">8
</span><span class="line">Fizz
</span><span class="line">Buzz
</span><span class="line">11
</span><span class="line">.
</span><span class="line">.
</span><span class="line">.
</span><span class="line">94
</span><span class="line">Buzz
</span><span class="line">Fizz
</span><span class="line">97
</span><span class="line">98
</span><span class="line">Fizz
</span><span class="line">Buzz
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Pour celles et ceux qui ne pigent pas cette ligne de code Ruby, on va la
déconstruire petit à petit.</p>

<!-- more -->

<p>Nous avons affaire à une boucle (j’ai remplacé les <code>{}</code> par <code>do end</code>):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="mi">1</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
</span><span class="line">  <span class="nb">puts</span><span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[</span><span class="n">o</span><span class="o">=</span><span class="n">n</span><span class="o">**</span><span class="mi">4</span><span class="o">%-</span><span class="mi">15</span><span class="p">,</span><span class="n">o</span><span class="o">+</span><span class="mi">13</span><span class="o">]||</span><span class="n">n</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>a.upto(b)</code> itère de <code>a</code> jusqu’à <code>b</code>:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="go">$ irb</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="mi">10</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">iteration</span><span class="o">|</span>
</span><span class="line"><span class="gp">?&gt; </span>  <span class="nb">puts</span> <span class="n">iteration</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class="line"><span class="go">10</span>
</span><span class="line"><span class="go">11</span>
</span><span class="line"><span class="go">12</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Regardons de plus près l’intérieur de la boucle, là où c’est intéressant.
Ruby permet d’appeler les
méthodes sans utiliser de parenthèses. Ici je les ai simplement rajouter pour
tenter de clarifier le code:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="mi">1</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
</span><span class="line">  <span class="nb">puts</span><span class="p">(</span> <span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[</span><span class="n">o</span><span class="o">=</span><span class="n">n</span><span class="o">**</span><span class="mi">4</span><span class="o">%-</span><span class="mi">15</span><span class="p">,</span><span class="n">o</span><span class="o">+</span><span class="mi">13</span><span class="o">]||</span><span class="n">n</span> <span class="p">)</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Maintenant qu’on est bien sûr qu’il s’agit de la méthode <code>puts</code> avec un
argument bizarre dedans, je sépare les différents éléments de la <em>grammaire de
Ruby</em> par des espaces. Toujours pour essayer d’y voir plus clair:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="mi">1</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
</span><span class="line">  <span class="nb">puts</span><span class="p">(</span> <span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[</span><span class="n">o</span> <span class="o">=</span> <span class="n">n</span> <span class="o">**</span> <span class="mi">4</span> <span class="o">%</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="n">o</span> <span class="o">+</span> <span class="mi">13</span><span class="o">]</span> <span class="o">||</span> <span class="n">n</span> <span class="p">)</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Arrêtons nous un peu sur les sous-ensembles de chaîne <code>[a, b]</code>.
Le premier chiffre est la position de départ, le second est le nombre de
caractères:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="go">$ irb</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="s2">&quot;abcdef&quot;</span><span class="o">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">]</span>
</span><span class="line"><span class="go">&quot;ab&quot;</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="s2">&quot;abcdef&quot;</span><span class="o">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="o">]</span>
</span><span class="line"><span class="go">&quot;de&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ruby permet de donner une position de départ pas rapport à la fin:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="gp">&gt;&gt; </span><span class="s2">&quot;abcdef&quot;</span><span class="o">[-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="o">]</span>
</span><span class="line"><span class="go">&quot;cd&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Pour la suite, notez bien que si on va chercher des caractères <strong>avant</strong> le début ou <strong>après</strong> la fin de la chaîne, on se retrouve avec <code>nil</code>. Ça n’est pas une erreur, c’est le comportement attendu:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="gp">&gt;&gt; </span><span class="s2">&quot;abcdef&quot;</span><span class="o">[-</span><span class="mi">123</span><span class="p">,</span> <span class="mi">2</span><span class="o">]</span>
</span><span class="line"><span class="go">nil</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="s2">&quot;abcdef&quot;</span><span class="o">[</span><span class="mi">999</span><span class="p">,</span> <span class="mi">2</span><span class="o">]</span>
</span><span class="line"><span class="go">nil</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Maintenant essayons de décrypter la formule mathématique.
Utilisons une variable temporaire pour l’isoler:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="mi">1</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
</span><span class="line">  <span class="n">o</span> <span class="o">=</span> <span class="n">n</span> <span class="o">**</span> <span class="mi">4</span> <span class="o">%</span> <span class="o">-</span><span class="mi">15</span>
</span><span class="line">  <span class="nb">puts</span><span class="p">(</span> <span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[</span><span class="n">o</span><span class="p">,</span> <span class="n">o</span> <span class="o">+</span> <span class="mi">13</span><span class="o">]</span> <span class="o">||</span> <span class="n">n</span> <span class="p">)</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>En Ruby, <code>**</code> est l’opérateur de puissance:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="go">$ irb</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="mi">10</span> <span class="o">**</span> <span class="mi">2</span>
</span><span class="line"><span class="go">100</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="mi">10</span> <span class="o">**</span> <span class="mi">3</span>
</span><span class="line"><span class="go">1000</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="mi">10</span> <span class="o">**</span> <span class="mi">4</span>
</span><span class="line"><span class="go">10000</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Quant à <code>%</code>, c’est l’opérateur de la division modulaire, souvent appelé
<em>modulo</em>. Si vous avez plein de temps devant vous il y a la page wikipédia sur
<a href="http://fr.wikipedia.org/wiki/Arithm%C3%A9tique_modulaire">l’arithmétique modulaire</a>.
Sinon voici une explication rapide du modulo: <strong>c’est le reste de la division
entière</strong>. Donc <code>9 % 4 == 1</code>.</p>

<p>Sauf qu’ici on utilise le modulo avec un nombre négatif. Et là les maths se
compliquent un peu, et surtout différents langages de programmation auront différents
comportements.</p>

<p>Essayons plutôt de <em>sentir</em> la formule en l’appliquant aux nombres de 1 à 16:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="go">$ irb</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
</span><span class="line"><span class="gp">?&gt; </span>  <span class="n">o</span> <span class="o">=</span> <span class="n">n</span> <span class="o">**</span> <span class="mi">4</span> <span class="o">%</span> <span class="o">-</span><span class="mi">15</span>
</span><span class="line"><span class="gp">&gt;&gt; </span>  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">n</span><span class="si">}</span><span class="s2"> =&gt; </span><span class="si">#{</span><span class="n">o</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class="line"><span class="go">1 =&gt; -14</span>
</span><span class="line"><span class="go">2 =&gt; -14</span>
</span><span class="line"><span class="go">3 =&gt; -9</span>
</span><span class="line"><span class="go">4 =&gt; -14</span>
</span><span class="line"><span class="go">5 =&gt; -5</span>
</span><span class="line"><span class="go">6 =&gt; -9</span>
</span><span class="line"><span class="go">7 =&gt; -14</span>
</span><span class="line"><span class="go">8 =&gt; -14</span>
</span><span class="line"><span class="go">9 =&gt; -9</span>
</span><span class="line"><span class="go">10 =&gt; -5</span>
</span><span class="line"><span class="go">11 =&gt; -14</span>
</span><span class="line"><span class="go">12 =&gt; -9</span>
</span><span class="line"><span class="go">13 =&gt; -14</span>
</span><span class="line"><span class="go">14 =&gt; -14</span>
</span><span class="line"><span class="go">15 =&gt; 0</span>
</span><span class="line"><span class="go">16 =&gt; -14</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>J’imagine qu’à ce moment précis, vous êtes plusieurs à crier <strong>«Ha ha !»</strong>.</p>

<p>Cette formule, en Ruby, a donc 4 solutions possibles:</p>

<ul>
  <li>Quand <em>n</em> est un multiple de 3, la solution est <strong>-9</strong>.</li>
  <li>Quand <em>n</em> est un multiple de 5, la solution est <strong>-5</strong>.</li>
  <li>Quand <em>n</em> est un multiple de 15 (c’est à dire à la fois multiple de 3 et de
9), la solution est <strong>0</strong>.</li>
  <li>Dans les autres cas, la solution est <strong>-14</strong>.</li>
</ul>

<p>Voyons ce qu’il se passe avec <code>'FizzBuzz '</code> quand <code>o</code> vaut respectivement -9, -5, 0 puis -14:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="go">$ irb</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span> <span class="o">+</span> <span class="mi">13</span><span class="o">]</span>
</span><span class="line"><span class="go">&quot;Fizz&quot;</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">13</span><span class="o">]</span>
</span><span class="line"><span class="go">&quot;Buzz &quot;</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="o">]</span>
</span><span class="line"><span class="go">&quot;FizzBuzz &quot;</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="s1">&#39;FizzBuzz &#39;</span><span class="o">[-</span><span class="mi">14</span><span class="p">,</span> <span class="o">-</span><span class="mi">14</span> <span class="o">+</span> <span class="mi">13</span><span class="o">]</span>
</span><span class="line"><span class="go">nil</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Peut-être vous demandez vous pourquoi il y a un espace après FizzBuzz ?
En pratique, voici la raison:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="gp">&gt;&gt; </span><span class="s1">&#39;FizzBuzz&#39;</span><span class="o">[-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span> <span class="o">+</span> <span class="mi">13</span><span class="o">]</span>
</span><span class="line"><span class="go">nil</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="s1">&#39;FizzBuzz&#39;</span><span class="o">[-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">13</span><span class="o">]</span>
</span><span class="line"><span class="go">&quot;zBuzz&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>En théorie, je vous laisse faire les calculs ;)</p>

<p>Pour finir, il reste à expliquer le <code>||</code>, un exemple vaut mieux qu’un long
discours:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="irb"><span class="line"><span class="gp">&gt;&gt; </span><span class="s2">&quot;foo&quot;</span> <span class="o">||</span> <span class="mi">13</span>
</span><span class="line"><span class="go">&quot;foo&quot;</span>
</span><span class="line"><span class="gp">&gt;&gt; </span><span class="kp">nil</span> <span class="o">||</span> <span class="mi">13</span>
</span><span class="line"><span class="go">13</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Voilà, si vous voulez ajouter d’autres explications, les commentaires sont fait
pour ça ;)</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/05/02/comment-convertir-un-nombre-decimal-en-binaire-en-bash/">Comment convertir un nombre décimal en binaire en Bash ?</a></li><li><a href="http://lkdjiin.github.io/blog/2015/02/04/une-machine-de-turing-en-ruby-la-routine-de-copie/">Une machine de Turing en Ruby - La routine de copie</a></li><li><a href="http://lkdjiin.github.io/blog/2015/02/01/une-machine-de-turing-en-ruby/">Une machine de Turing en Ruby</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[3 réglages pour le langage R]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/04/23/3-reglages-pour-le-langage-r/"/>
    <updated>2015-04-23T15:17:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/04/23/3-reglages-pour-le-langage-r</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>Voici trois astuces pour régler/personnaliser le comportement de
l’environnement du langage R, en utilisant des fichiers de configuration.
<em>(Attention, je ne sais absolument pas si ça fonctionne sous Windows.)</em></p>

<h2 id="le-prompt">1) Le prompt</h2>

<p>Pour personnaliser votre prompt dans R, ajoutez les lignes suivantes dans un
fichier <code>~/.Rprofile</code> (créez le pour l’occasion s’il n’existe pas).</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>~/.Rprofile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">options<span class="p">(</span>prompt <span class="o">=</span> <span class="s">&quot;R&gt; &quot;</span><span class="p">)</span>
</span><span class="line">options<span class="p">(</span>continue <span class="o">=</span> <span class="s">&quot;+  &quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Exemple :</p>

<pre><code>R&gt; add2 &lt;- function(n) {
+    n + 2
+  }
R&gt; 
</code></pre>

<!-- more -->

<h2 id="la-largeur-de-la-sortie-console">2) La largeur de la sortie console</h2>

<p>La largeur de la sortie console de R est de 80 caractères. Point barre !
Si votre console est plus large (100, 120, etc) R n’utilisera quand même que
80 caractères. En mettant une petite fonction dans un fichier à part
<code>~/.Rutils</code> (par exemple) et en référençant ce fichier depuis le <code>~/.Rprofile</code>,
on peut avoir quelque chose de <em>presque</em> dynamique.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>~/.Rprofile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="kr">if</span> <span class="p">(</span>file.exists<span class="p">(</span><span class="s">&quot;~/.Rutils&quot;</span><span class="p">))</span> <span class="p">{</span>
</span><span class="line">  source<span class="p">(</span><span class="s">&quot;~/.Rutils&quot;</span><span class="p">)</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>~/.Rutils</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">tryCatch<span class="p">({</span>
</span><span class="line">  options<span class="p">(</span>width <span class="o">=</span> as.integer<span class="p">(</span>system<span class="p">(</span><span class="s">&#39;tput cols&#39;</span><span class="p">,</span> intern <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)))</span>
</span><span class="line"><span class="p">},</span> error <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>err<span class="p">)</span> <span class="p">{</span>
</span><span class="line">  write<span class="p">(</span><span class="s">&quot;Width set to 80.&quot;</span><span class="p">,</span> stderr<span class="p">());</span>
</span><span class="line">  options<span class="p">(</span>width <span class="o">=</span> <span class="m">80</span><span class="p">)</span>
</span><span class="line"><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Si vous redimensionnez votre console, il faut sourcer le fichier
(<code>source('~/.Rutils')</code>) pour prendre en compte la nouvelle largeur.</p>

<h2 id="le-dossier-des-bibliothques">3) Le dossier des bibliothèques</h2>

<p>Pour éviter que R vous crée un dossier <code>R</code> dans votre home, définissez vous
même un dossier pour stocker les packages, par exemple <code>~/local/R_libs/</code>.
Ensuite spécifiez le dans votre <code>~/.bashrc</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="c"># Custom repo of libraries for R.</span>
</span><span class="line"><span class="nb">export </span><span class="nv">R_LIBS</span><span class="o">=</span>~/local/R_libs/
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Vous connaissez d’autres trucs et astuces pour configurer R ? Dites moi ça dans
un commentaire. À bientôt.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/06/08/r-rep-vs-replicate/">R : rep vs replicate</a></li><li><a href="http://lkdjiin.github.io/blog/2015/04/09/les-sous-ensembles-de-listes-dans-r/">Les sous-ensembles de listes dans R</a></li><li><a href="http://lkdjiin.github.io/blog/2015/04/07/les-sous-ensembles-dans-r/">Les sous-ensembles dans R</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Comment mieux apprendre : La technique du rappel]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/04/21/comment-mieux-apprendre-la-technique-du-rappel/"/>
    <updated>2015-04-21T19:45:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/04/21/comment-mieux-apprendre-la-technique-du-rappel</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>J’ai participé récemment au MOOC
<a href="https://www.coursera.org/learn/learning-how-to-learn">Learning how to learn</a>
produit par
l’<a href="https://www.coursera.org/ucsd">université de San Diego, Californie</a>
et accessible sur <a href="https://www.coursera.org/courses">Coursera</a>.</p>

<p>Je cherchais des moyens, des trucs, des astuces, pour apprendre mieux. C’est à
dire plus rapidement et plus facilement. J’ai été servi. Les professeurs
Barbara Oakley et Terrence Sejnowski font un excellent travail. Je partagerai
avec vous quelques uns des trucs que j’ai appris en suivant ce cours, et je
vais commencer aujourd’hui par <strong>la technique du rappel</strong>.</p>

<p><img class="center" src="http://lkdjiin.github.io/images/total-recall.png" /></p>

<!-- more -->

<h2 id="quoi">Quoi</h2>

<p>La technique du rappel (ou <em>recall</em> en anglais) consiste à faire un réel effort
après un bloc de travail pour se rappeler les points essentiels abordés pendant
ce bloc de travail.</p>

<p>Ça n’est vraiment pas plus que ça, mais ce simple truc va booster votre
capacité à apprendre en ancrant plus sûrement les connaissances toutes fraiches
dans votre mémoire.</p>

<p>Alors qu’est-ce que j’appelle <strong>un bloc de travail ?</strong> Ça peut être à peu près
tout et n’importe quoi ;) Un cours de 20 minutes, 30 minutes de lecture, une
conférence de 45 minutes, une séance de débugage d’une heure, une réunion de 3
heures, etc…</p>

<h2 id="pourquoi">Pourquoi</h2>

<p>Si on ne fait rien pour ancrer dans son cerveau les informations vues durant un
bloc de travail (tout spécialement si c’est de la théorie), celles-ci vont
disparaitre rapidement. Il est <strong>naturel</strong> que ces informations s’effacent si
on ne fait rien pour les retenir.</p>

<p>La technique du rappel évite aussi, dans une certaine mesure, l’<strong>illusion de
compétence</strong> (la fausse sensation d’avoir appris quelque chose) en mettant
l’accent très vite sur les points non acquis ou délicats.</p>

<h2 id="comment">Comment</h2>

<p>La meilleure mise en œuvre que j’ai pu trouver est de prendre quelques
dizaines de secondes (rarement plus d’une minute) à la fin d’un bloc de travail
pour écrire les points essentiels. Ça peut être 2 ou 3 phrases, une liste, un
schéma, ou tout ce que vous jugerez pertinent.</p>

<p>Deux remarques : (i) Prendre des notes pendant le bloc de travail ne dispense
pas de mettre en œuvre la technique du rappel, (ii) Penser aux quelques points
essentiels abordés pendant le bloc de travail ne suffit pas, il faut vraiment
les écrire.</p>

<p><strong>C’est une habitude toute simple, qui se prend très vite, et qui peut vraiment vous
permettre d’apprendre plus rapidement et plus facilement.</strong></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Les sous-ensembles de listes dans R]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/04/09/les-sous-ensembles-de-listes-dans-r/"/>
    <updated>2015-04-09T07:47:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/04/09/les-sous-ensembles-de-listes-dans-r</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>Après avoir parlé des <a href="http://lkdjiin.github.io/blog/2015/04/07/les-sous-ensembles-dans-r/">sous-ensembles de vecteurs</a> dans le langage R,
c’est maintenant le tour des listes. En R, une liste peut contenir des
types différents, au contraire du vecteur, limité à un seul type.
Prenons par exemple la liste suivante :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x <span class="o">&lt;-</span> list<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> c<span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>À l’affichage, on remarque qu’il s’agit d’une liste grâce aux doubles crochets
(<code>[[]]</code>) :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x
</span><span class="line"><span class="go">[[1]]</span>
</span><span class="line"><span class="go">[1] 1</span>
</span><span class="line">
</span><span class="line"><span class="go">[[2]]</span>
</span><span class="line"><span class="go">[1] 2</span>
</span><span class="line">
</span><span class="line"><span class="go">[[3]]</span>
</span><span class="line"><span class="go">[1] &quot;a&quot; &quot;b&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<!-- more -->

<p>Les éléments d’une liste peuvent être nommés. Suivant votre langage de
prédilection, vous pouvez penser à une liste R comme à un hash, un dictionnaire,
un tableau associatif, etc :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x <span class="o">&lt;-</span> list<span class="p">(</span>foo <span class="o">=</span> <span class="m">1</span><span class="p">,</span> bar <span class="o">=</span> <span class="m">2</span><span class="p">,</span> baz <span class="o">=</span> c<span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">))</span>
</span><span class="line"><span class="gp">&gt; </span>x
</span><span class="line"><span class="go">$foo</span>
</span><span class="line"><span class="go">[1] 1</span>
</span><span class="line">
</span><span class="line"><span class="go">$bar</span>
</span><span class="line"><span class="go">[1] 2</span>
</span><span class="line">
</span><span class="line"><span class="go">$baz</span>
</span><span class="line"><span class="go">[1] &quot;a&quot; &quot;b&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Que se passe-t-il si on utilise la même syntaxe qu’avec un vecteur pour extraire
un élément d’une liste ?</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x<span class="p">[</span><span class="m">3</span><span class="p">]</span>
</span><span class="line"><span class="go">$baz</span>
</span><span class="line"><span class="go">[1] &quot;a&quot; &quot;b&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>L’idée c’est que l’opérateur <code>[]</code> renvoie le même type d’objet que l’objet sur
lequel il est appliqué. Donc utiliser <code>[]</code> sur une liste retourne une liste :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>class<span class="p">(</span>x<span class="p">[</span><span class="m">3</span><span class="p">])</span>
</span><span class="line"><span class="go">[1] &quot;list&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Pour aller chercher un élément, et pas une liste à un seul élément, il faut
utiliser l’opérateur double crochets (<code>[[]]</code>) :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x<span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
</span><span class="line"><span class="go">[1] &quot;a&quot; &quot;b&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Lorsque les éléments sont nommés, on peut bien sûr utiliser leurs noms comme
clé :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x<span class="o">$</span>baz
</span><span class="line"><span class="go">[1] &quot;a&quot; &quot;b&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Nous pouvons extraire un sous-ensemble d’une liste en passant les indices à
l’opérateur crochet (<code>[]</code>) :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x <span class="o">&lt;-</span> list<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="gp">&gt; </span>x<span class="p">[</span>c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">)]</span>
</span><span class="line"><span class="go">[[1]]</span>
</span><span class="line"><span class="go">[1] 1</span>
</span><span class="line">
</span><span class="line"><span class="go">[[2]]</span>
</span><span class="line"><span class="go">[1] 3</span>
</span><span class="line">
</span><span class="line"><span class="go">[[3]]</span>
</span><span class="line"><span class="go">[1] 5</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ou bien en lui donnant un vecteur de booléens :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x<span class="p">[</span>c<span class="p">(</span><span class="k-Variable">F</span><span class="p">,</span> <span class="k-Variable">T</span><span class="p">,</span> <span class="k-Variable">F</span><span class="p">,</span> <span class="k-Variable">T</span><span class="p">,</span> <span class="k-Variable">F</span><span class="p">)]</span>
</span><span class="line"><span class="go">[[1]]</span>
</span><span class="line"><span class="go">[1] &quot;2&quot;</span>
</span><span class="line">
</span><span class="line"><span class="go">[[2]]</span>
</span><span class="line"><span class="go">[1] 4</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>En faisant la même chose avec l’opérateur double crochets (<code>[[]]</code>) nous pouvons
extraire le nième élément d’un vecteur :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x <span class="o">&lt;-</span> list<span class="p">(</span>c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">),</span> c<span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="gp">&gt; </span>x<span class="p">[[</span>c<span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">)]]</span>
</span><span class="line"><span class="go">[1] &quot;a&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ce qu’on peut décomposer ainsi, d’abord le 2ème élément de la liste :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x<span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
</span><span class="line"><span class="go">[1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Puis le premier élément du vecteur, la syntaxe commence à devenir drôle :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>x<span class="p">[[</span><span class="m">2</span><span class="p">]][[</span><span class="m">1</span><span class="p">]]</span>
</span><span class="line"><span class="go">[1] &quot;a&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Question pour les connaisseurs du langage R : le code précédent me suggère qu’un vecteur
<em>agit</em> aussi comme une liste et que l’opérateur double crochet (<code>[[]]</code>) n’est pas
limité aux listes. Par exemple :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="rconsole"><span class="line"><span class="gp">&gt; </span>y <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
</span><span class="line"><span class="gp">&gt; </span>y
</span><span class="line"><span class="go">[1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span>
</span><span class="line"><span class="gp">&gt; </span>y<span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
</span><span class="line"><span class="go">[1] &quot;b&quot;</span>
</span><span class="line"><span class="gp">&gt; </span>y<span class="p">[</span><span class="m">2</span><span class="p">]</span>
</span><span class="line"><span class="go">[1] &quot;b&quot;</span>
</span><span class="line"><span class="gp">&gt; </span>y<span class="p">[[</span><span class="m">2</span><span class="p">]]</span> <span class="o">==</span> y<span class="p">[</span><span class="m">2</span><span class="p">]</span>
</span><span class="line"><span class="go">[1] TRUE</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Est-ce qu’il y a un intérêt à utiliser les double crochets avec des vecteurs ?</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/04/07/les-sous-ensembles-dans-r/">Les sous-ensembles dans R</a></li><li><a href="http://lkdjiin.github.io/blog/2015/06/08/r-rep-vs-replicate/">R : rep vs replicate</a></li><li><a href="http://lkdjiin.github.io/blog/2015/04/23/3-reglages-pour-le-langage-r/">3 réglages pour le langage R</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Les sous-ensembles dans R]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/04/07/les-sous-ensembles-dans-r/"/>
    <updated>2015-04-07T19:12:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/04/07/les-sous-ensembles-dans-r</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>J’apprends <a href="http://www.r-project.org/">le langage R</a> ! C’est cool d’apprendre de nouvelles choses.
C’est encore plus cool de les partager ;) Comme je suis vraiment tout neuf avec
R, c’est mon premier article sur ce langage. Et comme il faut bien commencer
quelque part, je vais vous parler de certains moyens d’obtenir des
sous-ensembles d’un vecteur (un vecteur c’est à peu près comme une liste).</p>

<p><img class="center" src="http://lkdjiin.github.io/images/subset.png" /></p>

<!-- more -->

<p>On lance le REPL :</p>

<pre><code>$ R
</code></pre>

<p>On va créer un ensemble de notes (<em>grades</em>).  Le symbole <code>&lt;-</code> est l’opérateur
d’affectation. La fonction <code>c()</code>, elle, permet de fabriquer un vecteur, avec
ici 10 notes allant de 1 à 5. <code>c()</code> assure la concaténation :</p>

<pre><code>&gt; grades &lt;- c(1, 2, 3, 2, 3, 2, 1, 4, 5, 2)
</code></pre>

<p>On peut vérifier ce qu’il y a dans <code>grades</code>. Le <code>[1]</code> indique qu’il s’agit d’un
vecteur dont on commence l’affichage par le 1er élément. R indexe en commençant
par 1, et non pas comme souvent par zéro :</p>

<pre><code>&gt; grades
 [1] 1 2 3 2 3 2 1 4 5 2
</code></pre>

<p>Pour être sûr de comprendre cette histoire de vecteur et d’index, créons et
affichons un vecteur de 40 éléments à l’aide de la syntaxe <code>début:fin</code> :</p>

<pre><code>&gt; 1:40
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40
</code></pre>

<p>Alors ces sous-ensembles ? Et bien commençons par une indexation classique, avec
<code>[]</code>, pour retrouver un seul élément (en fait un vecteur d’un seul élément) :</p>

<pre><code>&gt; grades[1]
[1] 1
</code></pre>

<p>On peut aussi retrouver un <em>range</em>, par exemple du 6ème au 8ème élément :</p>

<pre><code>&gt; grades[6:8]
[1] 2 1 4
</code></pre>

<p>Pour retrouver seulement les notes au dessus de 2 on met la condition entre les
crochets :</p>

<pre><code>&gt; grades[grades &gt; 2]
[1] 3 3 4 5
</code></pre>

<p>Il est intéressant de voir ce qu’on obtient avec <code>grades &gt; 2</code> :</p>

<pre><code>&gt; grades &gt; 2
 [1] FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE
</code></pre>

<p>On obtient un vecteur de valeurs booléennes ! <em>TRUE</em> si la note est supérieure
à 2, <em>FALSE</em> dans le cas contraire.</p>

<p>Rangeons ce vecteur de booléens dans une variable <code>mask</code> et servons nous de
cette nouvelle variable pour obtenir le sous-ensemble des notes supérieures
à 2 :</p>

<pre><code>&gt; mask &lt;- grades &gt; 2
&gt; grades[mask]
[1] 3 3 4 5
</code></pre>

<p>Pour finir, utilisons directement un vecteur de booléens pour récupérer les
éléments n° 4, 5, 6, 9 et 10 (<em>F</em> et <em>T</em> sont des raccourcis pour <em>FALSE</em> et
<em>TRUE</em>) :</p>

<pre><code>&gt; grades[c(F, F, F, T, T, T, F, F, T, T)]
[1] 2 3 2 5 2
</code></pre>

<p>Voilà, mon premier article sur R est terminé, je vais certainement en écrire
plein d’autres dans un futur proche. J’espère que ce sujet vous intéresse ;)</p>

<pre><code>&gt; q()
</code></pre>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/04/09/les-sous-ensembles-de-listes-dans-r/">Les sous-ensembles de listes dans R</a></li><li><a href="http://lkdjiin.github.io/blog/2015/06/08/r-rep-vs-replicate/">R : rep vs replicate</a></li><li><a href="http://lkdjiin.github.io/blog/2015/04/23/3-reglages-pour-le-langage-r/">3 réglages pour le langage R</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ce que je n'ai pas fait cette 14ème semaine de 2015]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/04/05/ce-que-je-nai-pas-fait-cette-14eme-semaine-de-2015/"/>
    <updated>2015-04-05T20:15:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/04/05/ce-que-je-nai-pas-fait-cette-14eme-semaine-de-2015</id>
    <content type="html"><![CDATA[<p>Je n’ai pas commencé à bloguer en anglais, mais ça ne saurait tarder. Il me
reste à choisir quelle techno utiliser. J’hésite entre :</p>

<ol>
  <li>Jekyll (que je connais bien)</li>
  <li><a href="http://www.metalsmith.io">metalsmith</a> (pour sortir de ma zone de comfort)</li>
  <li>rake, cat, <a href="http://en.wikipedia.org/wiki/M4_%28computer_language%29">m4</a>, sed, etc (sans rire ! pour un retour aux sources)</li>
</ol>

<p>Vous me conseillez quoi ?</p>

<!-- more -->

<p>Sinon, je n’ai pas encore lu <a href="http://en.wikipedia.org/wiki/Super-Cannes">Super-Cannes</a> de J.G. Ballard, que je me suis offert
il y a 2 semaines. J’ai plus envie de lire de la fiction en ce moment, j’espère
que ça va revenir vite.</p>

<p>Et vous ? Que n’avez-vous pas fait cette semaine ?</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/03/29/ce-que-je-nai-pas-fait-cette-semaine-2/">Ce que je n&#8217;ai pas fait cette semaine - 2</a></li><li><a href="http://lkdjiin.github.io/blog/2015/03/22/ce-que-je-nai-pas-fait-cette-semaine/">Ce que je n&#8217;ai pas fait cette semaine</a></li><li><a href="http://lkdjiin.github.io/blog/2014/10/08/le-jeu-de-la-vie-dans-sept-langages-differents/">Le jeu de la vie dans sept langages différents</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Arduino : Un métronome tap tempo]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/04/03/arduino-un-metronome-tap-tempo/"/>
    <updated>2015-04-03T18:35:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/04/03/arduino-un-metronome-tap-tempo</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>J’aimerais fabriquer un métronome <em>tap tempo</em> avec l’arduino. C’est un projet à
moyen terme, et
comme souvent, il pourrait être bénéfique de diviser le projet en plusieurs
petites parties. Donc, avant de tenter la programmation du tap tempo, je vais
faire un métronome tout simple avec juste une LED.</p>

<h2 id="les-composants">Les composants</h2>

<p>Coté composants, on a seulement besoin d’une LED et d’une résistance (220 Ohms
ça ira).</p>

<p><img class="center" src="http://lkdjiin.github.io/images/metronome1_bb.png" /></p>

<!-- more -->

<h2 id="un-premier-code-naif">Un premier code naif</h2>

<p>Le premier jet est tout simple :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="cpp"><span class="line"><span class="k">const</span> <span class="n">byte</span> <span class="n">LED_PIN</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="n">setup</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="n">loop</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class="line">  <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span class="line">  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class="line">  <span class="n">delay</span><span class="p">(</span><span class="mi">600</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Une fois compilé et envoyé dans l’arduino, la LED clignote toutes les 0,7
secondes. Nous avons un métronome visuel !</p>

<p>C’est simple, non ? Mouais. Trop simple, bien sûr. Ce code est problèmatique
pour la fabrication d’un métronome. Alors afin de comprendre pourquoi, parlons
un peu du tempo.</p>

<h2 id="le-tempo">Le tempo</h2>

<p>Pour le musicien, le tempo est une suite de clics (ou tic, ou tac, ou poum, ou
tchak, ou clac). Ces clics, qui ont la particularité de se succéder à
intervalles réguliers, marquent la <strong>vitesse</strong> de la musique.</p>

<p>Le tempo (donc la vitesse de la musique) est indiqué à l’aide d’un nombre qui
représente le nombre de clics par minute.
Par exemple un tempo de 60 nous indique qu’il doit y avoir 60 clics dans une minute,
ou plus simplement 1 clic par seconde. Autre exemple, un tempo de 120 indique
120 clics par minute, soit 2 clics par seconde, ou encore 1 clic toutes les
0,5 secondes.</p>

<p>Voyons maintenant quelques formules. Pour trouver la fréquence F, en secondes,
il faut diviser 60 par le tempo (noté T) :</p>

<script type="math/tex; mode=display">
\begin{align}

F = 60 / T
\end{align}
</script>

<p>Pour obtenir cette fréquence en millisecondes, il faut multiplier le résultat
précédent par 1000 ;</p>

<script type="math/tex; mode=display">
\begin{align}

F = 60 / T \times 1000
\end{align}
</script>

<p>Le code arduino ci-dessus envoit un clic toutes les 0,7 secondes, à quel
tempo cela correspond-t-il ? Pour calculer le tempo, on divise 60 par la
fréquence en secondes :</p>

<script type="math/tex; mode=display">
\begin{align}

T = 60 / F
\end{align}
</script>

<p>Donc, une fréquence de 0,7 seconde, comme celle de notre code arduino,
correspond à un tempo de \(60 / 0,7\). Soit à peu près 86.</p>

<h2 id="le-problme-de-la-boucle-de-code">Le problème de la boucle de code</h2>

<p>Maintenant on peut regarder le souci de ce code :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="cpp"><span class="line"><span class="kt">void</span> <span class="n">loop</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class="line">  <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span class="line">  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class="line">  <span class="n">delay</span><span class="p">(</span><span class="mi">600</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Partons de l’hypothèse qu’en plus des deux <code>digitalWrite</code>, mon code doit
aussi :</p>

<ul>
  <li>calculer l’intensité de la LED suivant le beat.</li>
  <li>jouer du son et ausssi calculer son intensité suivant le beat.</li>
  <li>s’occuper de plusieurs LEDs, peut-être avec des motifs.</li>
  <li>écrire le tempo et d’autres informations sur un écran LCD.</li>
  <li>tout ce que vous pourrez imaginer d’autre ;)</li>
</ul>

<p>Imaginons maintenant que l’ensemble de ces actions prennent 30 millisecondes
(0,03 secondes). Dans ce cas le tempo sera de \(60 / 0,73\). Soit à peu près 82.
Donc plus du tout la valeur de 86 qu’on avait trouvé tout à l’heure. <strong>Notre
métronome n’est pas fiable !</strong> Il ne vaut rien, arg.</p>

<p><img class="center" src="http://lkdjiin.github.io/images/facepalm.jpg" /></p>

<h2 id="faire-et-ne-pas-attendre">Faire et ne pas attendre</h2>

<p>Pour remédier à ce problème nous demandons à l’arduino d’allumer la LED toutes
les 700 millisecondes et non pas <strong>d’attendre</strong> pendant 700 millisecondes.
Pour cela nous gardons une trace du dernier moment où la LED a été allumée
(dans <code>oldTime</code>) et nous comparons cette trace avec le moment présent
(<code>currentTime</code>) à chaque passage dans la boucle :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</pre></td><td class="code"><pre><code class="cpp"><span class="line"><span class="k">const</span> <span class="n">byte</span> <span class="n">LED_PIN</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class="line"><span class="c1">// In millisecondes.</span>
</span><span class="line"><span class="k">const</span> <span class="kt">long</span> <span class="n">FREQUENCY</span> <span class="o">=</span> <span class="mi">700</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kt">long</span> <span class="n">currentTime</span><span class="p">;</span>
</span><span class="line"><span class="kt">long</span> <span class="n">oldTime</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="n">setup</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class="line">  <span class="n">currentTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line">  <span class="n">oldTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="n">loop</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="n">currentTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
</span><span class="line">
</span><span class="line">  <span class="k">if</span><span class="p">(</span><span class="n">currentTime</span> <span class="o">&gt;=</span> <span class="n">oldTime</span> <span class="o">+</span> <span class="n">FREQUENCY</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class="line">    <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span class="line">    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class="line">    <span class="n">oldTime</span> <span class="o">=</span> <span class="n">currentTime</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ça fonctionne pour notre métronome, bien qu’il reste encore 100 millisecondes
gachées (avec <code>delay(100);</code>). La prochaine fois on verra un moyen de se
débarasser de cette attente inutile.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/03/01/un-jeu-de-simon-etape-1/">Un jeu de Simon - Étape 1</a></li><li><a href="http://lkdjiin.github.io/blog/2015/02/11/les-maths-derriere-v-equals-ri/">Les maths derrière V=RI</a></li><li><a href="http://lkdjiin.github.io/blog/2015/01/25/mes-premiers-pas-avec-arduino/">Mes premiers pas avec Arduino</a></li></ul></section>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim : Pourquoi les touches HJKL ?]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/04/02/vim-pourquoi-les-touches-hjkl/"/>
    <updated>2015-04-02T11:46:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/04/02/vim-pourquoi-les-touches-hjkl</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>Pourquoi utilise-t-on les touches HJKL pour les déplacements de base dans Vim ?
Par déplacement de base, j’entends un caractère à gauche ou à droite (H et L) et
une ligne au-dessus ou en dessous (J et K). Pourquoi ne pas utiliser les
touches fléchées, par exemple, ou même la main gauche ?</p>

<p><img class="center" src="http://lkdjiin.github.io/images/ADM-3A.jpg" /></p>

<!-- more -->

<p><strong>Pourquoi pas les touches fléchées ?</strong></p>

<p>En fait, on peut bien sûr se servir des touches fléchées pour se déplacer dans
Vim.  C’est utile si vous êtes débutant, mais vous devriez essayer rapidement
de perdre l’habitude de les utiliser : Elles sont trop loin du <em>home row</em> (voir
plus bas).</p>

<p>On peut carrément les désactiver ou mieux, s’en servir pour autre chose, comme
pour changer de fenêtre, modifier la taille des fenêtres, etc…</p>

<p><strong>Pourquoi pas les touches à main gauche ?</strong></p>

<p>Le créateur de Vim était droitier, donc on se sert de la main droite !
Évidemment non, puisque les joueurs utilisent sans problèmes WASD pour se
diriger (ZQSD en azerty).</p>

<p><strong>Le home row</strong></p>

<p>Quelle est la bonne façon de placer ses doigts sur un clavier ?  Selon les
règles de la dactylographie, les doigts des deux mains doivent se placer sur le
<em>home row</em>. Ça minimise énormément le déplacement des doigts et des mains et la
fatigue musculaire tout en augmentant la vitesse de frappe.</p>

<p><img class="center" src="http://lkdjiin.github.io/images/keyboard-home-row.png" /></p>

<p><strong>Mais alors pourquoi utiliser HJKL pour se déplacer et pas JKL; ?</strong></p>

<p>À cause de la force des doigts peut-être ? Le petit n’étant pas très fort ?
Non. C’est tout simplement parce que Vi, l’ancêtre de Vim, a été créé sur
<a href="http://en.wikipedia.org/wiki/ADM-3A">le terminal ADM-3A</a>.
Regardez bien ce qu’on trouve sur les touches HJKL :</p>

<p><img class="center" src="http://lkdjiin.github.io/images/keyboard-ADM-3A.png" /></p>

<p>Au passage, notez l’emplacement de la touche ESC ;-)</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2014/06/07/creer-facilement-des-themes-pour-vim/">Créer facilement des thèmes pour Vim</a></li><li><a href="http://lkdjiin.github.io/blog/2014/05/26/cherchez-avec-grep-dans-vim/">Cherchez avec grep dans Vim</a></li><li><a href="http://lkdjiin.github.io/blog/2014/05/19/le-theme-gruvbox-pour-vim/">Le thème Gruvbox pour Vim</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ce que je n'ai pas fait cette semaine - 2]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/03/29/ce-que-je-nai-pas-fait-cette-semaine-2/"/>
    <updated>2015-03-29T15:38:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/03/29/ce-que-je-nai-pas-fait-cette-semaine-2</id>
    <content type="html"><![CDATA[<p>Je n’ai pas acheté le livre <a href="https://pragprog.com/book/adrpo/ruby-performance-optimization">Ruby Performance Optimization: Why Ruby Is Slow, and How to Fix It</a>.
J’en ai très envie, ça serait bien d’avoir sous la main un ensemble de trucs et
astuces pour accélerer mon code. Si j’hésite encore c’est parce que l’auteur
promet «<em>and your code will run orders of magnitude faster</em>». Ça semble
un peu exagéré quand même ;)</p>

<!-- more -->

<p>Je n’ai pas encore donné d’argent à <a href="https://rubytogether.org/">RubyTogether</a>.
Honte à moi, il s’agit d’un oubli.</p>

<p>Je n’ai pas encore lu <a href="http://www.franceculture.fr/oeuvre-lumiere-et-matiere-une-etrange-histoire-de-richard-feynman">Lumière et matière : Une étrange histoire</a> de Richard Feynman, trouvé à 1€ au marché au livre du mois dernier.</p>

<p>Je n’ai pas encore mis le nez dans le langage <a href="https://www.processing.org/">Processing</a>. Il est en lointaine position sur ma todo list donc ça devra attendre
encore longtemps, mais ça m’intrigue vraiment.</p>

<p>Et vous ? Que n’avez-vous pas fait cette semaine ?</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/04/05/ce-que-je-nai-pas-fait-cette-14eme-semaine-de-2015/">Ce que je n&#8217;ai pas fait cette 14ème semaine de 2015</a></li><li><a href="http://lkdjiin.github.io/blog/2015/03/22/ce-que-je-nai-pas-fait-cette-semaine/">Ce que je n&#8217;ai pas fait cette semaine</a></li><li><a href="http://lkdjiin.github.io/blog/2015/05/23/hacker-la-classe-fixnum/">Hacker la classe Fixnum</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pas de logique dans les vues Rails]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/03/28/pas-de-logique-dans-les-vues-rails/"/>
    <updated>2015-03-28T09:10:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/03/28/pas-de-logique-dans-les-vues-rails</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>Je dis souvent aux personnes avec qui je travaille qu’introduire de la logique
dans les vues est une mauvaise idée.</p>

<p>Pour moi, une vue n’est pas vraiment un fichier comme les autres. C’est avant tout du
HTML, donc normalement rien de bien compliqué. Et à ce titre, j’ai rencontré beaucoup de
développeurs, certains par ailleurs très doués, pour qui les vues sont
inconsciemment les poubelles d’un projet Rails. Leurs modèles et leurs
contrôleurs sont très bien écrits, concis, testés, refactorés, parfois même
documentés ;) Mais leurs vues sont incompréhensibles et compliquées à outrance.</p>

<p><img class="center" src="http://lkdjiin.github.io/images/complexity_512.jpg" /></p>

<!-- more -->

<p>Pourquoi ? J’explique ça surtout par le nombre de langages qui peuvent se
côtoyer au sein d’une vue :</p>

<ul>
  <li>HTML</li>
  <li>le langage de templating</li>
  <li>Ruby</li>
  <li>parfois même du Javascript</li>
</ul>

<p>C’est déjà assez dur de produire du bon code avec un seul
langage, alors imaginez s’il faut jongler entre trois ou quatre !</p>

<p>Je me suis aperçu aussi que lorsque je dis <strong>pas de logique dans les vues Rails</strong>
de nombreux développeurs vont acquiescer. Ils seront d’accord avec moi sur le
principe, mais ne sauront pas pour autant comment éviter d’introduire cette
logique.</p>

<p>Pour ne pas avoir à embarquer trop de code Ruby dans les vues (c’est une autre
manière de dire «pas de logique») Rails propose pourtant une solution simple et parfaitement intégrée :
les <em>helpers</em>. Voyons comment ça fonctionne.</p>

<h2 id="avec-logique-dans-les-vues">Avec logique dans les vues</h2>

<p>Prenons une vue très simple qui va lister tous les posts d’une collection
nommée <code>@feed</code>. Nos posts contiennent uniquement un corps de texte, nommé
<code>body</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>app/views/posts/index.html.erb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="erb"><span class="line"><span class="cp">&lt;%</span> <span class="vi">@feed</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="x">  &lt;p class=&#39;post-body&#39;&gt;</span>
</span><span class="line"><span class="x">    </span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="o">.</span><span class="n">body</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="x">  &lt;/p&gt;</span>
</span><span class="line"><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Maintenant votre produit évolue : les posts peuvent contenir une photo, ou non.
Et le texte d’un post <strong>avec</strong> photo doit s’afficher différemment du texte d’un
post <strong>sans</strong> photo. On pourrait faire comme ça :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>app/views/posts/index.html.erb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="erb"><span class="line"><span class="cp">&lt;%</span> <span class="vi">@feed</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="x">  &lt;p class=&#39;post-body </span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="o">.</span><span class="n">post_type</span> <span class="cp">%&gt;</span><span class="x">&#39;&gt;</span>
</span><span class="line"><span class="x">    </span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="o">.</span><span class="n">body</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="x">  &lt;/p&gt;</span>
</span><span class="line"><span class="x">  </span><span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">photo?</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="x">    </span><span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="s2">&quot;photos/</span><span class="si">#{</span><span class="n">post</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="ss">alt</span><span class="p">:</span> <span class="n">post</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
</span><span class="line">        <span class="ss">class</span><span class="p">:</span> <span class="s1">&#39;photo&#39;</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="x">  </span><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Bien sûr ça va fonctionner. Et cette première version n’est pas si mauvaise.
Mais le fait d’avoir mis un simple <code>if</code> ici fait que
la semaine prochaine nous aurons un second <code>if</code>, dans 15 jours on ajoutera un
<code>else</code>, puis dans 1 mois un <code>if</code> imbriqué avec une condition complexe, etc.</p>

<h2 id="sans-logique-dans-les-vues">Sans logique dans les vues</h2>

<p>Qu’est-ce qu’on veut vraiment, du point de vue de la vue ?
On veut afficher une photo. C’est tout :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>app/views/posts/index.html.erb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="erb"><span class="line"><span class="cp">&lt;%</span> <span class="vi">@feed</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="x">  &lt;p class=&#39;post-body </span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="o">.</span><span class="n">post_type</span> <span class="cp">%&gt;</span><span class="x">&#39;&gt;</span>
</span><span class="line"><span class="x">    </span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="o">.</span><span class="n">body</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="x">  &lt;/p&gt;</span>
</span><span class="line"><span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">photo_for</span><span class="p">(</span><span class="n">post</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class="line"><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>On a pas besoin d’en écrire plus dans la vue. Le code Ruby, la logique, ira
dans un <em>helper</em> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>app/helpers/posts_helper.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">module</span> <span class="nn">postsHelper</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">photo_for</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
</span><span class="line">    <span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">photo?</span>
</span><span class="line">      <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;photos/</span><span class="si">#{</span><span class="n">post</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line">      <span class="n">image_tag</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="ss">alt</span><span class="p">:</span> <span class="n">post</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="ss">class</span><span class="p">:</span> <span class="s1">&#39;photo&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Quand le post n’est pas une photo, la méthode <code>photo_for</code> renverra <code>nil</code>, valeur
qui ne sera pas affichée dans la vue.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/05/23/hacker-la-classe-fixnum/">Hacker la classe Fixnum</a></li><li><a href="http://lkdjiin.github.io/blog/2015/05/02/comment-convertir-un-nombre-decimal-en-binaire-en-bash/">Comment convertir un nombre décimal en binaire en Bash ?</a></li><li><a href="http://lkdjiin.github.io/blog/2015/02/05/une-machine-de-turing-en-ruby-une-bande-de-donnees-infinie/">Une machine de Turing en Ruby - Une bande de données infinie</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ce que je n'ai pas fait cette semaine]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/03/22/ce-que-je-nai-pas-fait-cette-semaine/"/>
    <updated>2015-03-22T15:18:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/03/22/ce-que-je-nai-pas-fait-cette-semaine</id>
    <content type="html"><![CDATA[<p><em>Premier article d’une série récurente que je posterai chaque dimanche, voici
ce que je n’ai pas fait cette semaine.</em></p>

<p>Je n’ai pas installé <strong>la dernière version de l’</strong><a href="http://arduino.cc/en/Main/Software">IDE Arduino</a>.
Je ne compte pas l’utiliser, mais il parait qu’elle intègre des outils en ligne
de commande, et ça c’est cool.</p>

<!-- more -->

<p>Je n’ai pas (encore) lu <strong>le livre de Hilary Mason</strong>
<a href="http://www.oreilly.com/data/free/data-driven.csp">Data Driven</a>.</p>

<p>Je n’ai pas acheté <strong>le livre</strong> <a href="https://leanpub.com/developing-games-with-ruby/">Developing Games With Ruby</a>.
J’hésite. Ça pourrait être fun.</p>

<p>Je ne me suis pas abonné à <strong>la version numérique de
Courrier International.</strong>
Je voulais le faire, mais on ne peut payer ni par carte bancaire, ni par
paypal. Et je n’aime pas l’idée du prélèvement bancaire.</p>

<p>Je n’ai pas travaillé sur mon <a href="https://twitter.com/lkdjiin/status/570258711547023362">super algorithme de génération d’immenses
labyrinthes</a> :</p>

<p>Je n’ai pas donné d’argent à <a href="https://rubytogether.org/">RubyTogether</a>.
Je voulais le faire, je voudrais le faire, je pense qu’il est nécessaire
d’avoir une telle structure pour assurer l’avenir de Ruby et de son écosystème
<del>mais le montant unique de 40$ par mois pour un particulier m’a refroidi.</del>
<ins>Et voilà, je réagis à chaud, je m’emporte et donc je
raconte n’importe quoi. On peut maintenant <a href="https://rubytogether.org/friends">faire un don</a>
sans cotiser mensuellement. Alors rendez-vous la semaine prochaine pour savoir
si j’ai donné ;)</ins></p>

<p>Et vous ? Que n’avez-vous pas fait cette semaine ?</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/04/05/ce-que-je-nai-pas-fait-cette-14eme-semaine-de-2015/">Ce que je n&#8217;ai pas fait cette 14ème semaine de 2015</a></li><li><a href="http://lkdjiin.github.io/blog/2015/03/29/ce-que-je-nai-pas-fait-cette-semaine-2/">Ce que je n&#8217;ai pas fait cette semaine - 2</a></li><li><a href="http://lkdjiin.github.io/blog/2015/05/23/hacker-la-classe-fixnum/">Hacker la classe Fixnum</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pour des raisons de sécurité il n'est pas possible de personnaliser votre mot de passe]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/03/18/pour-des-raisons-de-securite-il-nest-pas-possible-de-personnaliser-votre-mot-de-passe/"/>
    <updated>2015-03-18T09:59:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/03/18/pour-des-raisons-de-securite-il-nest-pas-possible-de-personnaliser-votre-mot-de-passe</id>
    <content type="html"><![CDATA[<p>J’ai coutume de râler sur twitter contre les sites web qui font n’importe quoi
avec les mots de passe : limitation du nombre de caractères, impossibilité
d’utiliser certains caractères, mail de confirmation avec mot de passe en
clair, etc. Mais avec le site de ma mutuelle, on atteint un niveau
d’incompétence hors catégorie.</p>

<!-- more -->

<p>Le mot de passe que ma mutuelle m’a attribué fait <strong>six</strong> caractères de long.
Cinq lettres majuscules et un chiffre. Gardez bien ça en tête pendant que vous
lisez la suite de l’article.</p>

<p>Naturellement j’ai eu envie de changer ce mot de passe pour un autre, plus
personnel et… un peu plus long. J’ai eu beau chercher, je n’ai rien vu sur leur
site qui me permette de modifier mon mot de passe. J’ai donc jeter un œil à
la F.A.Q., dont voici le copier coller:</p>

<blockquote>
  <p>Comment personnaliser mon mot de passe ?</p>

  <p>Pour des raisons de sécurité, il n’est pas possible de personnaliser votre mot
de passe. En effet, étant donné le caractère confidentiel de vos données,
votre mot de passe est généré selon un algorithme complexe, et se doit de
vérifier certaines contraintes de sécurité. C’est pour cette raison que les
assurés ne sont pas autorisés à personnaliser leur mot de passe.</p>
</blockquote>

<p>What the fuck !</p>

<p>Je me demande si un jour dans ma vie on s’est foutu de ma gueule plus fort que
ça ? Et en fait ça me pose une question de droit : «À qui appartient mon
mot de passe, à moi, ou au site web ?».</p>

<p>Laissez moi un commentaire si vous avez vécu des expériences similaires ou si
vous vous y connaissez en droit ;)</p>

<p>À bientôt.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/04/05/ce-que-je-nai-pas-fait-cette-14eme-semaine-de-2015/">Ce que je n&#8217;ai pas fait cette 14ème semaine de 2015</a></li><li><a href="http://lkdjiin.github.io/blog/2015/03/29/ce-que-je-nai-pas-fait-cette-semaine-2/">Ce que je n&#8217;ai pas fait cette semaine - 2</a></li><li><a href="http://lkdjiin.github.io/blog/2015/03/22/ce-que-je-nai-pas-fait-cette-semaine/">Ce que je n&#8217;ai pas fait cette semaine</a></li></ul></section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Un jeu de Simon - Étape 1]]></title>
    <link href="http://lkdjiin.github.io/blog/2015/03/01/un-jeu-de-simon-etape-1/"/>
    <updated>2015-03-01T21:00:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2015/03/01/un-jeu-de-simon-etape-1</id>
    <content type="html"><![CDATA[<div class="level-tag level-tag-1">Niveau : <span>facile</span></div>

<p>Lors d’un projet du dimanche avec ma fille, j’ai commencé un
<a href="http://fr.wikipedia.org/wiki/Simon_%28jeu%29">jeu de Simon</a> sur l’Arduino.
Nous avons simplifié les règles au maximum (ma fille n’a pas 3 ans) et obtenu
ce que je vous propose dans cet article.</p>

<p>C’est seulement un point de départ, j’ai bien envie d’implémenter le jeu en
entier et d’en faire un objet réel. Il devrait donc y avoir d’autres articles…</p>

<p><img class="center" src="http://lkdjiin.github.io/images/simon-1.jpg" /></p>

<!-- more -->

<h2 id="les-rgles">Les règles</h2>

<p>J’ai réduit les règles du jeu au plus simple : Il y a deux couleurs, rouge et
vert. La machine donne une couleur en allumant une LED et le joueur répond en
appuyant sur un bouton de couleur. Si la réponse est juste le joueur gagne et
une nouvelle partie commence. Si la réponse est fausse les LEDs clignotent
quelque temps pour signaler que le jeu est perdu et une nouvelle partie
commence.</p>

<p>Difficile de faire plus simple, hein ?</p>

<h2 id="les-composants">Les composants</h2>

<p>Nous aurons besoin de :</p>

<ul>
  <li>2 LEDs, une rouge et une verte</li>
  <li>2 boutons momentanés, si possible un rouge et un vert (sinon les gris
moches ça marche aussi)</li>
  <li>2 résistances de 220 Ohms pour les LEDs</li>
  <li>2 résistances de 10 kilo Ohms pour les boutons</li>
  <li>du câble</li>
</ul>

<h2 id="lassemblage">L’assemblage</h2>

<p><img class="center" src="http://lkdjiin.github.io/images/simon-etape1-bb.png" /></p>

<h2 id="le-code">Le code</h2>

<p>Rien de spécial à dire pour le code, si ce n’est qu’il a été écrit sous la
pression de ma fille et la patience n’est pas son fort. Ça pourrait expliquer
pourquoi le code n’est pas très joli.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
</pre></td><td class="code"><pre><code class="c"><span class="line"><span class="k">const</span> <span class="n">byte</span> <span class="n">RED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line"><span class="k">const</span> <span class="n">byte</span> <span class="n">GREEN</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="n">byte</span> <span class="n">buttonRed</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
</span><span class="line"><span class="n">byte</span> <span class="n">buttonGreen</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
</span><span class="line"><span class="n">byte</span> <span class="n">ledRed</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class="line"><span class="n">byte</span> <span class="n">ledGreen</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</span><span class="line"><span class="n">byte</span> <span class="n">computerTurn</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class="line"><span class="n">byte</span> <span class="n">lastPly</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="n">pinMode</span><span class="p">(</span><span class="n">buttonRed</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class="line">  <span class="n">pinMode</span><span class="p">(</span><span class="n">buttonGreen</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
</span><span class="line">  <span class="n">pinMode</span><span class="p">(</span><span class="n">ledRed</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class="line">  <span class="n">pinMode</span><span class="p">(</span><span class="n">ledGreen</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span><span class="line">
</span><span class="line">  <span class="n">randomSeed</span><span class="p">(</span><span class="n">analogRead</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="k">if</span><span class="p">(</span><span class="n">computerTurn</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="n">lastPly</span> <span class="o">=</span> <span class="n">random</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span class="line">    <span class="n">allLedsOff</span><span class="p">();</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">lastPly</span> <span class="o">==</span> <span class="n">RED</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledRed</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">      <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledGreen</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="n">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
</span><span class="line">    <span class="n">allLedsOff</span><span class="p">();</span>
</span><span class="line">    <span class="n">computerTurn</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">stateRed</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">buttonRed</span><span class="p">);</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">stateGreen</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">buttonGreen</span><span class="p">);</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">stateRed</span> <span class="o">||</span> <span class="n">stateGreen</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="k">if</span><span class="p">(</span><span class="n">stateRed</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">lightTheLed</span><span class="p">(</span><span class="n">ledRed</span><span class="p">);</span>
</span><span class="line">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="n">lightTheLed</span><span class="p">(</span><span class="n">ledGreen</span><span class="p">);</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">      <span class="k">if</span><span class="p">(</span><span class="n">stateRed</span> <span class="o">&amp;&amp;</span> <span class="n">lastPly</span> <span class="o">==</span> <span class="n">RED</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
</span><span class="line">      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">stateGreen</span> <span class="o">&amp;&amp;</span> <span class="n">lastPly</span> <span class="o">==</span> <span class="n">GREEN</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="n">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
</span><span class="line">      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">((</span><span class="n">stateRed</span> <span class="o">&amp;&amp;</span> <span class="n">lastPly</span> <span class="o">==</span> <span class="n">GREEN</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">stateGreen</span> <span class="o">&amp;&amp;</span> <span class="n">lastPly</span> <span class="o">==</span> <span class="n">RED</span><span class="p">))</span> <span class="p">{</span>
</span><span class="line">        <span class="n">blinkLeds</span><span class="p">();</span>
</span><span class="line">        <span class="n">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">      <span class="n">computerTurn</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">    <span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">allLedsOff</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledRed</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class="line">  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledGreen</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">lightTheLed</span><span class="p">(</span><span class="n">byte</span> <span class="n">led</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">led</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class="line">  <span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span><span class="line">  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">led</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kt">void</span> <span class="nf">blinkLeds</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledRed</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class="line">    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">ledGreen</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span><span class="line">    <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span class="line">    <span class="n">allLedsOff</span><span class="p">();</span>
</span><span class="line">    <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="la-suite">La suite</h2>

<p>Il reste beaucoup de choses à faire… Ajouter le bleu et le jaune ; ajouter du son ;
enregistrer les séquences de couleur ; le vrai jeu de Simon, quoi.
Et ensuite il faudra en faire un objet autonome, sans Arduino.</p>

<p>Alors à la prochaine.</p>

<section><h1>Articles connexes</h1><ul><li><a href="http://lkdjiin.github.io/blog/2015/04/03/arduino-un-metronome-tap-tempo/">Arduino : Un métronome tap tempo</a></li><li><a href="http://lkdjiin.github.io/blog/2015/01/25/mes-premiers-pas-avec-arduino/">Mes premiers pas avec Arduino</a></li><li><a href="http://lkdjiin.github.io/blog/2015/02/11/les-maths-derriere-v-equals-ri/">Les maths derrière V=RI</a></li></ul></section>
]]></content>
  </entry>
  
</feed>
