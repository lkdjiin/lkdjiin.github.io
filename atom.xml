<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[lkdjiin's blog]]></title>
  <link href="http://lkdjiin.github.io/atom.xml" rel="self"/>
  <link href="http://lkdjiin.github.io/"/>
  <updated>2013-11-01T22:00:41+01:00</updated>
  <id>http://lkdjiin.github.io/</id>
  <author>
    <name><![CDATA[Xavier Nayrac]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/"/>
    <updated>2013-11-01T21:54:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Dans les articles précédents, nous avons définis trois méthodes:
<code>divisors</code>, <code>proper_divisors</code> et <code>sum_of_proper_divisors</code>.
Ces trois méthodes commencent à former ce qu&#8217;on appelle une
collection, ou un ensemble, de méthodes utilitaires. Nous allons
aujourd&#8217;hui les regrouper dans un module.</p>

<!-- more -->


<p>Pour l&#8217;instant nous n&#8217;avons que trois méthodes, et elles portent toutes
sur les nombres. Mais nous allons bientôt en ajouter d&#8217;autres, peut-être
beaucoup d&#8217;autres. Certaines porteront peut-être sur la géométrie ou les
probabilités ? Il est plus propre de regrouper entre elles les méthodes
qui traitent du même sujet, alors pourquoi attendre ?</p>

<p>Voici comment on peut regrouper nos méthodes au sein du module <code>Number</code>:</p>

<figure class='code'><figcaption><span>number.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Number</span>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>    <span class="n">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">sum_of_proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>    <span class="n">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Vous voyez que les méthodes sont insérées à l&#8217;intérieur de:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Number</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Vous voyez aussi qu&#8217;on a ajouté <code>self.</code> devant le nom de chaque méthode.
Cela indique à Ruby qu&#8217;on veut utiliser ces méthodes sans pour autant
avoir à créer un objet (<em>si vous ne savez pas encore ce qu&#8217;est un objet,
ne vous inquiétez pas, nous n&#8217;en avons pas besoin pour l&#8217;instant</em>).</p>

<p>Voici une seconde manière de regrouper nos méthodes au sein du module <code>Number</code>:</p>

<figure class='code'><figcaption><span>number.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Number</span>
</span><span class='line'>  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>      <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>      <span class="n">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">sum_of_proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>      <span class="n">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Cette deuxième syntaxe, qui peut sembler un peu bizarre si vous la
rencontrez pour la première fois, fait exactement la même chose que
la première syntaxe. Avec Ruby, il y a souvent plusieurs façons de dire
une même chose.
Je ne vais pas expliquer cette syntaxe aujourd&#8217;hui, mais sachez qu&#8217;elle
est très prisée dans la communauté Ruby et que vous la rencontrerez
souvent. Vous pouvez choisir celle que vous voulez.</p>

<p>Notez que, <strong>par convention</strong>, le module Number doit être enregistré
dans le fichier <code>number.rb</code>. Il n&#8217;y a pas d&#8217;obligation, mais avouez
que ça facilite grandement les choses.</p>

<h2>Comment utiliser un module ?</h2>

<p><strong>Première solution</strong>, vous pouvez écrire votre code à la suite du module:</p>

<figure class='code'><figcaption><span>number.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Number</span>
</span><span class='line'>  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>      <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>      <span class="n">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">sum_of_proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>      <span class="n">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="no">Number</span><span class="o">.</span><span class="n">sum_of_proper_divisors</span> <span class="mi">8</span>
</span></code></pre></td></tr></table></div></figure>


<p>Puis vous lancez le programme:</p>

<pre><code>[~/]⇒ ruby number.rb 
7
</code></pre>

<p><strong>Deuxième solution</strong>, vous lancez irb, <em>dans le même dossier</em> que le fichier
<code>number.rb</code> et vous chargez le module:</p>

<pre><code>[~/]⇒ irb
&gt;&gt; require "./number"
true
&gt;&gt; Number.sum_of_proper_divisors 8
7
</code></pre>

<p><strong>Troisième solution</strong>, vous écrivez un programme dans un fichier séparé, par
exemple <code>test.rb</code>, <em>dans le même dossier</em> que le fichier
<code>number.rb</code>:</p>

<figure class='code'><figcaption><span>test.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s2">&quot;./number&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="no">Number</span><span class="o">.</span><span class="n">sum_of_proper_divisors</span> <span class="mi">8</span>
</span></code></pre></td></tr></table></div></figure>


<p>Puis vous le lancez:</p>

<pre><code>[~/]⇒ ruby test.rb
7
</code></pre>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4/'>Apprendre Ruby en faisant des maths 4</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/25/apprendre-ruby-en-faisant-des-maths-3/'>Apprendre Ruby en faisant des maths 3</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installer Scheme]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/31/installer-scheme/"/>
    <updated>2013-10-31T18:50:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/31/installer-scheme</id>
    <content type="html"><![CDATA[<p>Avant d&#8217;apprendre Scheme, il faut l&#8217;installer. Avant de l&#8217;installer, il
faut choisir une implémentation: interpréteur ou compilateur ? Les deux ?
Quel OS ? Quel(s) dialecte(s) ? Le site
<a href="http://community.schemewiki.org/?scheme-faq-standards#implementations">community.schemewiki.org</a>
recense 75 implémentations ! Oui, j&#8217;ai compté.</p>

<!-- more -->


<p>Après prises de conseils et réflexion, j&#8217;ai décidé d&#8217;essayer trois
implémentations:
<a href="http://www.gnu.org/software/guile/">Guile</a>,
<a href="http://www.call-cc.org/">Chicken</a>
et <a href="http://racket-lang.org/">Racket</a>.
<strong>Guile</strong> parce qu&#8217;il est déjà installé sur ma machine.
<strong>Chicken</strong> pour son compilateur vers
le langage C. <strong>Racket</strong> pour ses nombreux DSL, parce qu&#8217;il a l&#8217;air très cool
pour créer de nouveaux DSL et parce qu&#8217;il semble être le plus utilisé.</p>

<h2>Guile</h2>

<p>Guile semble être déjà installé sur la plupart des Linux. En tout cas, il
l&#8217;était sur ma machine…
Le REPL n&#8217;utilise pas readline par défaut, ce qui est d&#8217;ailleurs le cas
des 3 implementations que j&#8217;ai testé.
Pour activer readline, il faut créer un fichier <code>.guile</code> dans le <code>home</code> et y mettre:</p>

<figure class='code'><figcaption><span>.guile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">ice-9</span> <span class="nv">readline</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="nf">activate-readline</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Chicken</h2>

<p>J&#8217;ai installé Chicken grâce aux paquets Debian, rien à dire… Pour activer
readline dans le REPL, il faut d&#8217;abord installer une bibliothèque (un <em>egg</em>
dans le jargon Chicken):</p>

<pre><code>sudo chicken-install readline
</code></pre>

<p>Ensuite on crée un fichier <code>~/.csirc</code> avec le contenu suivant:</p>

<figure class='code'><figcaption><span>.csirc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">use</span> <span class="nv">readline</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nb">current-input-port </span><span class="p">(</span><span class="nf">make-gnu-readline-port</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="nf">gnu-history-install-file-manager</span>
</span><span class='line'> <span class="p">(</span><span class="nb">string-append </span><span class="p">(</span><span class="k">or </span><span class="p">(</span><span class="nf">get-environment-variable</span> <span class="s">&quot;HOME&quot;</span><span class="p">)</span> <span class="s">&quot;.&quot;</span><span class="p">)</span> <span class="s">&quot;/.csi.history&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Enfin on crée le fichier d&#8217;historique:</p>

<pre><code>touch ~/.csi.history
</code></pre>

<h2>Racket</h2>

<p>Je voulais la toute dernière version, j&#8217;ai donc téléchargé les sources et
lancé une compilation. Tout a très bien fonctionné, le fichier <code>README</code> est
parfaitement clair. Pour activer readline dans le REPL de Racket, il faut
cette fois créé un fichier <code>~/.racketrc</code> avec le texte suivant:</p>

<figure class='code'><figcaption><span>.racketrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scheme'><span class='line'><span class="p">(</span><span class="nf">require</span> <span class="nv">xrepl</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/29/je-vais-apprendre-scheme/'>Je vais apprendre Scheme</a></li><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Apprendre Ruby en faisant des maths 5]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/"/>
    <updated>2013-10-30T19:15:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Jusqu&#8217;ici on a écrit une méthode qui calcule les diviseurs d&#8217;un nombre et
une seconde méthode qui calcule les diviseurs stricts.
Notre objectif étant de lister les nombres amiables jusqu&#8217;à 10 000, il nous
faut maintenant obtenir la <em>somme</em> des diviseurs stricts d&#8217;un nombre.</p>

<!-- more -->


<p>Il nous faut donc calculer la somme des nombres qui composent une liste.
Allons y, prenons une liste et plaçons la dans une variable nommée <code>x</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="o">]</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nous avons déjà vu la méthode <code>select</code>, qui sélectionne certains éléments
d&#8217;une liste ; nous allons voir maintenant la méthode <code>reduce</code>, qui va <em>réduire</em>
les éléments d&#8217;une liste à <em>un seul</em> élément:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">reduce</span> <span class="p">{</span><span class="o">|</span><span class="n">sum</span><span class="p">,</span> <span class="n">int</span><span class="o">|</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">int</span><span class="p">}</span>
</span><span class='line'><span class="go">=&gt; 7</span>
</span></code></pre></td></tr></table></div></figure>


<p>Contrairement à la méthode <code>select</code> qui ne prenait qu&#8217;une seule variable
dans le bloc d&#8217;instruction, la méthode <code>reduce</code> en prends ici deux:
<code>sum</code> et <code>int</code>. <code>sum</code> joue le rôle d&#8217;un accumulateur et contient le résultat
qui sera retourné par la méthode. <code>int</code> fait référence à l&#8217;élément de la
liste en cours de traitement, exactement comme avec <code>select</code>. Pour chaque
élément de la liste <code>x</code>, l&#8217;instruction <code>sum + int</code> est exécutée.</p>

<p>On peut se demander quelle est la valeur initiale de <code>sum</code> ? Tout simplement
le premier élément de la liste. Et nous ne sommes pas limité aux nombres,
<code>reduce</code> fonctionnera avec ce qu&#8217;on veut, par exemple des chaînes de
caractères:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="o">[</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="o">].</span><span class="n">reduce</span> <span class="p">{</span><span class="o">|</span><span class="n">string</span><span class="p">,</span> <span class="n">letter</span><span class="o">|</span> <span class="n">string</span> <span class="o">+</span> <span class="n">letter</span><span class="p">}</span>
</span><span class='line'><span class="go">=&gt; &quot;foo&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ruby permet aussi de simplifier l&#8217;écriture dans un cas trivial comme le
notre:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span>
</span><span class='line'><span class="go">=&gt; 7</span>
</span></code></pre></td></tr></table></div></figure>


<p>En fait, <code>reduce</code> ne prend pas obligatoirement un bloc. Ci-dessus,
<code>reduce</code> prend
en argument un symbole: <code>:+</code>. <code>+</code> est le nom d&#8217;une méthode. Oui, <code>+</code> est
bien une méthode:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">1</span><span class="o">.</span><span class="n">+</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="go">=&gt; 3</span>
</span></code></pre></td></tr></table></div></figure>


<p>Je ne vais pas parler plus des symboles aujourd&#8217;hui, sachez seulement
que les deux écritures suivantes font la même chose mais que la seconde
est plus dans l&#8217;esprit de Ruby:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">x</span><span class="o">.</span><span class="n">reduce</span> <span class="p">{</span><span class="o">|</span><span class="n">sum</span><span class="p">,</span> <span class="n">int</span><span class="o">|</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">int</span><span class="p">}</span>
</span><span class='line'><span class="n">x</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Voilà, on est prêt à implémenter la méthode <code>sum_of_proper_divisors</code>, ce
qui signifie en français «somme des diviseurs stricts»:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">sum_of_proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>  <span class="n">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Comme la dernière fois, on se sert d&#8217;une méthode plus générale
(<code>proper_divisors</code>) pour écrire une méthode plus spécifique.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'><span class="gp">&gt;&gt; </span>  <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class='line'><span class="go">&gt;&gt;</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'><span class="gp">&gt;&gt; </span>  <span class="n">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class='line'><span class="go">&gt;&gt;</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">sum_of_proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'><span class="gp">&gt;&gt; </span>  <span class="n">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class='line'><span class="go">&gt;&gt;</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">divisors</span> <span class="mi">8</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4, 8]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">proper_divisors</span> <span class="mi">8</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">sum_of_proper_divisors</span> <span class="mi">8</span>
</span><span class='line'><span class="go">=&gt; 7</span>
</span></code></pre></td></tr></table></div></figure>


<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4/'>Apprendre Ruby en faisant des maths 4</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/25/apprendre-ruby-en-faisant-des-maths-3/'>Apprendre Ruby en faisant des maths 3</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Je vais apprendre Scheme]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/29/je-vais-apprendre-scheme/"/>
    <updated>2013-10-29T22:04:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/29/je-vais-apprendre-scheme</id>
    <content type="html"><![CDATA[<p>C&#8217;est décidé, je me mets à <a href="http://en.wikipedia.org/wiki/Scheme_%28programming_language%29">Scheme</a>.
En voici les raisons principales:</p>

<ul>
<li>Je veux apprendre <a href="http://racket-lang.org/">Racket</a>, qui est me semble-t-il un surensemble de Scheme.</li>
<li>J&#8217;ai essayé Emacs Lisp il y a longtemps (au siècle dernier !),
j&#8217;avais trouvé ça intéressant.</li>
<li>J&#8217;ai fait du Logo il y a encore plus longtemps et j&#8217;en garde un très
bon souvenir.</li>
<li>Je cherche un langage qui ne soit pas orienté objet pour écrire des
algorithmes génétiques, parce que je ne suis pas persuadé que ce soit
le meilleur paradigme pour ce type de programmes.</li>
<li>Je cherche un langage qui ait un coté fonctionnel mais je ne suis pas
encore prêt à abandonner le confort des variables mutables.</li>
</ul>


<!-- more -->


<p>Bref, je crois que Scheme (Racket en fait) est le langage que je cherche.
Vous pouvez donc vous attendre à quelques articles sur le sujet dans les
semaines qui viennent ;) Et pour commencer je parlerais un peu de la
<strong>véritable jungle</strong> des interpreteurs/compilateurs pour Scheme.
J&#8217;en ai sélectionné deux pour l&#8217;instant: Guile et Racket.</p>

<p>Est-ce-que certains d&#8217;entre vous ont de l&#8217;expérience avec Scheme et/ou
Racket ? Des conseils à me donner ?</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/31/installer-scheme/'>Installer Scheme</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/26/couverture-de-code-pour-ruby-avec-coco/'>Couverture de code pour Ruby avec coco</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/24/une-tonne-de-livres-sur-la-programmation/'>Une tonne de livres sur la programmation</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Apprendre Ruby en faisant des maths 4]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4/"/>
    <updated>2013-10-28T16:15:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>La <a href="http://lkdjiin.github.io/blog/2013/10/25/apprendre-ruby-en-faisant-des-maths-3/">dernière fois</a>,
on a écrit une méthode qui calcule et renvoie les diviseurs d&#8217;un nombre n:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Aujourd&#8217;hui, on se sert de cette méthode pour en écrire une autre.</p>

<!-- more -->


<p>Après avoir obtenu la liste des diviseurs d&#8217;un nombre, je voudrais maintenant
pouvoir obtenir la liste des diviseurs <em>stricts</em> d&#8217;un nombre. C&#8217;est à dire
tous les diviseurs de n <em>sauf</em> le nombre n lui-même.</p>

<pre><code>diviseurs de 8 :         1 ; 2 ; 4 ; 8
diviseurs stricts de 8 : 1 ; 2 ; 4
</code></pre>

<p>La méthode <code>divisors</code> fait <em>presque</em> ce qu&#8217;on veut. Elle renvoie un nombre de
trop, le dernier. On voudrait donc une nouvelle méthode qui renvoie la même
chose que <code>divisors</code>, exepté le dernier élément de la liste. Voyons comment
obtenir juste une partie d&#8217;une liste à l&#8217;aide d&#8217;<code>irb</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'><span class="gp">&gt;&gt; </span>  <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">liste</span> <span class="o">=</span> <span class="n">divisors</span> <span class="mi">8</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4, 8]</span>
</span></code></pre></td></tr></table></div></figure>


<p>On a commencé par reécrire la méthode <code>divisors</code>, puis on a assigné à la
variable <em>liste</em> les diviseurs du nombre 8. Notre liste (qui, je le rappelle
est de type <code>Array</code>) comporte quatre éléments. En Ruby, comme dans beaucoup
d&#8217;autres langages, le numéro d&#8217;ordre d&#8217;un élément d&#8217;une liste (qu&#8217;on appelle
aussi indice ou index) comme avec zéro. Notre liste à donc 4 éléments, dont
les indexs vont de 0 à 3:</p>

<pre><code>index  élément
  0       1
  1       2
  2       4
  3       8
</code></pre>

<p>Pour obtenir le 1er élément (index 0) je dois écrire:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">liste</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'><span class="go">=&gt; 1</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pour obtenir le 4ème, et dernier, élément (index 3) j&#8217;écris:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">liste</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span>
</span><span class='line'><span class="go">=&gt; 8</span>
</span></code></pre></td></tr></table></div></figure>


<p>C&#8217;est bien joli mais je veux obtenir un <em>ensemble</em> d&#8217;élément, et pas un
élément unique comme dans les exemples précédents. Et si on essayait avec
un <code>Range</code> ? On veut les 3 premiers éléments, autrement dit les éléments
d&#8217;index 0 à 2:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">liste</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">2</span><span class="o">]</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4]</span>
</span></code></pre></td></tr></table></div></figure>


<p>On y est presque ! Effectivement, ce que je veux en réalité ce n&#8217;est pas
les éléments de 0 jusqu&#8217;à 2, mais les éléments de 0 jusqu&#8217;à <em>l&#8217;avant-dernier</em>.
Je veux que ça fonctionne quelque soit le nombre d&#8217;élément de la liste.
Pour cela, Ruby offre une syntaxe très simple: le dernier élément de la
liste se voit attribuer l&#8217;index <code>-1</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">liste</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4, 8]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Et comme vous l&#8217;avez peut-être déjà deviné, l&#8217;avant-dernier élément possède
l&#8217;index <code>-2</code> (et ainsi de suite…):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">liste</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Cette fois ça y est, on est prêt à se servir de la méthode <code>divisors</code> comme
d&#8217;une base pour construire une nouvelle méthode. Celle-ci va s&#8217;appeler
<code>proper_divisors</code>, ce qui signifie «diviseurs stricts» en anglais:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">proper_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'><span class="gp">&gt;&gt; </span>  <span class="n">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">2</span><span class="o">]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">divisors</span> <span class="mi">8</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4, 8]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">proper_divisors</span> <span class="mi">8</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4]</span>
</span></code></pre></td></tr></table></div></figure>


<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/25/apprendre-ruby-en-faisant-des-maths-3/'>Apprendre Ruby en faisant des maths 3</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim pour écrire un livre ?]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/27/vim-pour-ecrire-un-livre/"/>
    <updated>2013-10-27T21:34:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/27/vim-pour-ecrire-un-livre</id>
    <content type="html"><![CDATA[<p>Il y a une <a href="http://www.reddit.com/r/vim/comments/142zn7/are_you_interested_in_a_vim_for_writers_book/">discusion intéressante</a>
sur reddit, initié par quelqu&#8217;un qui souhaite écrire un petit livre sur
«Vim pour les écrivains». <em>Writer</em> en anglais, soit écrivain, rédacteur,
auteur, etc.</p>

<!-- more -->


<p>Le sujet me semble intéressant. En effet, si Vim est surtout utilisé par
des développeurs, il n&#8217;a pas été créé spécifiquement pour cela. À la base,
c&#8217;est juste un éditeur et il est légitime de vouloir l&#8217;utiliser pour écrire
un livre, une thèse, un devoir scolaire, de la documentation, etc.</p>

<p>Seulement ce genre de document est bien différent d&#8217;un code informatique.
Je pense par exemple aux notes de bas de pages, aux images, aux formules
mathématiques…</p>

<p>Je suis curieux, avez-vous déjà utilisé Vim pour écrire un livre ?
Connaissez-vous quelqu&#8217;un qui l&#8217;a fait ? Avez-vous des trucs, des astuces,
des plugins spécifiques à partager ?</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/13/vim-creez-des-presentations-avec-vimdeck/'>Vim: Créez des présentations avec Vimdeck</a></li><li><a href='http://lkdjiin.github.io/blog/2013/09/14/vim-la-commande-point-et-le-clavier-azerty/'>Vim: la commande point et le clavier Azerty</a></li><li><a href='http://lkdjiin.github.io/blog/2013/09/07/le-systeme-de-fenetrage-de-vim/'>Le système de fenêtrage de Vim</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Couverture de code pour Ruby avec coco]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/26/couverture-de-code-pour-ruby-avec-coco/"/>
    <updated>2013-10-26T18:07:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/26/couverture-de-code-pour-ruby-avec-coco</id>
    <content type="html"><![CDATA[<p>Il y a 3 ans, j&#8217;ai écrit une gem Ruby pour faire de la couverture de
code (<em>code coverage</em>). <a href="https://github.com/colszowka/simplecov">SimpleCov</a>,
la gem la plus utilisée pour cette tâche venait tout juste de voir le
jour et ne me convenait pas entièrement. À l&#8217;époque je trouvais SimpleCov
trop ennuyeuse à configurer et à faire fonctionner.</p>

<!-- more -->


<p>Qu&#8217;on ne me fasse pas dire ce que je n&#8217;ai pas écrit : SimpleCov remplie
<em>parfaitement</em> sa tâche. C&#8217;est juste que je voulais un truc plus simple.
Je voulais quelque chose qui fonctionne en une ligne, avec configuration
optionnelle et surtout, avec un rapport de couverture
super simple et dépouillé. C&#8217;est comme ça qu&#8217;est née la gem
<a href="https://github.com/lkdjiin/coco">coco</a>. Bon ok, il m&#8217;est arrivé de me
demander si je ne l&#8217;avais pas écrit juste pour le jeu de mot…</p>

<p>Pour utiliser coco, il suffit de charger la gem au tout début des tests
comme ceci:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;coco&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Et… c&#8217;est tout ! Chaque fois que vous lancerez les tests, coco produira un
rapport si (et seulement si) au moins un fichier n&#8217;est pas couvert à 100%.</p>

<p>La configuration, au besoin, se fait dans un fichier caché au format yaml,
à la racine du projet. Par exemple si vous trouvez qu&#8217;un taux de couverture
de 90% est acceptable, vous pouvez le changer comme ça:</p>

<pre><code>:threshold: 90
</code></pre>

<p>Si vous voulez exclure un fichier et un dossier complet du rapport vous
pouvez écrire:</p>

<pre><code>:excludes:
- lib/project/file1.rb
- config/initializers
</code></pre>

<p>Il y a plusieurs autres exemples de configuration sur le
<a href="https://github.com/lkdjiin/coco/wiki">wiki du projet</a>. Enfin, pour une
présentation rapide de coco, en anglais, il y a le
<a href="http://lkdjiin.github.io/coco/">site web</a>.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/29/je-vais-apprendre-scheme/'>Je vais apprendre Scheme</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Apprendre Ruby en faisant des maths 3]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/25/apprendre-ruby-en-faisant-des-maths-3/"/>
    <updated>2013-10-25T10:02:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/25/apprendre-ruby-en-faisant-des-maths-3</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>La <a href="http://lkdjiin.github.io/blog/2013/10/23/apprendre-ruby-en-faisant-des-maths-2/">dernière fois</a>, on a vu comment calculer la liste des diviseurs
d&#8217;un nombre avec <code>(1..8).select {|int| 8 % int == 0 }</code>. On va aujourd&#8217;hui
faire en sorte que ça fonctionne avec n&#8217;importe quel nombre, en écrivant
notre propre méthode.</p>

<!-- more -->


<p>Résumons : pour trouver les diviseurs de 8, j&#8217;écris:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="mi">8</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>et pour trouver les diviseurs de 4, j&#8217;écris:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="mi">4</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ce que je veux, c&#8217;est une façon de faire plus <em>générale</em>: je veux trouver
les diviseurs pour tout entier <em>n</em>. Essayons donc de remplacer le
nombre recherché par n:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="go">NoMethodError: undefined method `n&#39; on an instance of Object.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ruby n&#8217;est pas content et nous signale qu&#8217;il ne connait pas n. Ok, essayons
alors de définir n d&#8217;abord:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">8</span>
</span><span class='line'><span class="go">=&gt; 8</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4, 8]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Cette fois c&#8217;est bon. Maintenant vous êtes prêt à définir une méthode:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Pour information, divisors est le mot anglais pour diviseurs.</strong></p>

<p>Une définition de méthode commence par le mot-clé <code>def</code> et se termine par
le mot-clé <code>end</code>. La méthode ci-dessus s&#8217;appelle <code>divisors</code> et elle prend
un argument qui est nommé <code>n</code>.</p>

<p>On lance/appelle/exécute une méthode simplement par son nom, sans oublier
son (ses) argument(s). Par exemple <code>divisors 8</code> va calculer et renvoyer la
liste des diviseurs de 8. Voici un exemple d&#8217;utilisation lors d&#8217;une session
irb:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span class='line'><span class="gp">&gt;&gt; </span>  <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.n</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="n">n</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">divisors</span> <span class="mi">8</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4, 8]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">divisors</span> <span class="mi">4</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="n">divisors</span> <span class="mi">417</span>
</span><span class='line'><span class="go">=&gt; [1, 3, 139, 417]</span>
</span></code></pre></td></tr></table></div></figure>


<p>La prochaine fois nous verrons comment se servir de la méthode <code>divisors</code>
comme d&#8217;une base pour construire une autre méthode.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4/'>Apprendre Ruby en faisant des maths 4</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Une tonne de livres sur la programmation]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/24/une-tonne-de-livres-sur-la-programmation/"/>
    <updated>2013-10-24T10:22:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/24/une-tonne-de-livres-sur-la-programmation</id>
    <content type="html"><![CDATA[<p>Une super initiative de <a href="https://github.com/vhf">vhf</a> sur Github: une
longue, longue, très longue liste de livres sur le développement,
certains libres, tous gratuits.</p>

<!-- more -->


<p>Ils y a plusieurs listes de livres, selon les langues.
Vous trouverez la liste en anglais ici: <a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books.md">free-programming-books</a>.
Et la liste en français ici: <a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books-fr.md">free-programming-books-fr</a>.</p>

<p>Comme les listes sont sur Github, vous pouvez très facilement ajouter un
nouveau livre, rectifier un lien, etc.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/29/je-vais-apprendre-scheme/'>Je vais apprendre Scheme</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Apprendre Ruby en faisant des maths 2]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/23/apprendre-ruby-en-faisant-des-maths-2/"/>
    <updated>2013-10-23T09:54:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/23/apprendre-ruby-en-faisant-des-maths-2</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>On a vu, <a href="http://lkdjiin.github.io/blog/2013/10/21/apprendre-ruby-en-faisant-des-maths/">précédemment</a>,
comment savoir si un nombre d est un diviseur de n avec <code>8 % 2</code> et
comment obtenir une liste de nombre avec <code>1..8</code>. Maintenant on peut
apprendre à sélectionner les nombres qui nous intéressent dans cette liste.</p>

<!-- more -->


<p>Pour cela, nous allons utiliser la méthode <code>select</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="mi">8</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4, 8]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Et voilà, nous avons nos diviseurs de 8. La méthode <code>select</code> utilise un
bloc d&#8217;instructions (ce qui se trouve entre les <code>{}</code>). Cette (ou ces)
instruction va être exécutée sur chaque éléments de <code>1..8</code>, c&#8217;est à dire
sur 1, 2, 3, 4, 5 ,6, 7 puis enfin 8. Ici, l&#8217;instruction exécutée sur les
éléments est <code>8 % int == 0</code>. En clair on teste si le reste de la division
de 8 par <code>int</code> égal zéro. Qu&#8217;est-ce que c&#8217;est que ce <code>int</code> ? Et bien c&#8217;est
l&#8217;élément en cours de traitement, c&#8217;est à dire 1, puis 2, et ensuite 3, etc
jusqu&#8217;à 8. <code>int</code> est simplement un nom qu&#8217;on a donné pour pouvoir se
référer à l&#8217;élément en cours, ce nom est indiqué entre deux caractères <code>|</code>,
comme dans <code>|int|</code>. On peut lui donner le nom qu&#8217;on veut, par exemple:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">xavier</span><span class="o">|</span> <span class="mi">8</span> <span class="o">%</span> <span class="n">xavier</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="go">=&gt; [1, 2, 4, 8]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pour information, <em>int</em> est le diminutif de integer, qui signifie
nombre entier en anglais.</p>

<p>Comment Ruby sait qu&#8217;il doit sélectionner 2 et pas 3 ? Regardons cela de
plus près:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
</span><span class='line'><span class="go">=&gt; true</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span>
</span><span class='line'><span class="go">=&gt; false</span>
</span></code></pre></td></tr></table></div></figure>


<p>Le résultat d&#8217;un test, ici l&#8217;égalité avec <code>==</code> est soit vrai (true), soit
faux (false). Lorsque l&#8217;instruction dans le bloc (<code>{}</code>) renvoie true, l&#8217;élément
est sélectionné, lorsqu&#8217;elle renvoie false, l&#8217;élément est éliminé.</p>

<p>Vous devriez vérifier maintenant que ça fonctionne bien avec n&#8217;importe
quel nombre entier positif:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="mi">1</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="go">=&gt; [1]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">41</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="mi">41</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="go">=&gt; [1, 41]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">417</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="mi">417</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="go">=&gt; [1, 3, 139, 417]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">4179</span><span class="p">)</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="mi">4179</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
</span><span class='line'><span class="go">=&gt; [1, 3, 7, 21, 199, 597, 1393, 4179]</span>
</span></code></pre></td></tr></table></div></figure>


<p>La prochaine fois, on verra comment créer nos propres méthodes.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4/'>Apprendre Ruby en faisant des maths 4</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Les algorithmes génétiques démystifiés 36]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/22/les-algorithmes-genetiques-demystifies-36/"/>
    <updated>2013-10-22T08:25:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/22/les-algorithmes-genetiques-demystifies-36</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p>Il reste à voir deux fonctions <em>techniques</em> pour faire tourner notre
programme: la copie d&#8217;un individu et le rendu d&#8217;une image. Je les appelle
<em>techniques</em> car elles n&#8217;ont rien à voir avec l&#8217;algorithme lui-même. La
copie d&#8217;un individu est rendue nécessaire par le langage utilisé, Javascript,
et le rendu d&#8217;une image est nécessaire puisqu&#8217;on veut …et bien… afficher
des images, quoi…</p>

<!-- more -->


<p>Voyons d&#8217;abord la copie d&#8217;un individu:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">copy</span><span class="p">(</span><span class="nx">individual</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">indiCopy</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">TOTAL_SQUARES</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">objectCopy</span> <span class="o">=</span> <span class="p">{},</span>
</span><span class='line'>        <span class="nx">prop</span><span class="p">;</span>
</span><span class='line'>    <span class="k">for</span><span class="p">(</span><span class="nx">prop</span> <span class="k">in</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">objectCopy</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">prop</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">indiCopy</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">objectCopy</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">indiCopy</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Un individu est un tableau, contenant des objets, chaque objets contenants
des propriétés… <em>Là, je m&#8217;interroge et je demande l&#8217;avis de spécialistes:
est-ce-qu&#8217;il ne vaudrait pas mieux utiliser une librairie pour faire ça,
comme jQuery ou Underscore.js ?</em></p>

<p>Maintenant le rendu d&#8217;une image:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">renderIndividual</span><span class="p">(</span><span class="nx">individual</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">IMAGE_WIDTH</span><span class="p">,</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">);</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">TOTAL_SQUARES</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">alpha</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;rgb(&#39;</span> <span class="o">+</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">red</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">green</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">blue</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">size</span><span class="p">,</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">size</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>ctx</code> est un contexte de Canvas. Je vois ça tout simplement comme un objet
dans lequel on peut dessiner. Tout d&#8217;abord on <em>efface</em> l&#8217;image en la
remplissant de blanc:</p>

<pre><code>ctx.fillStyle = "white";
ctx.fillRect(0, 0, IMAGE_WIDTH, IMAGE_HEIGHT);
</code></pre>

<p>Puis on dessine chacuns des carrés:</p>

<pre><code>for (var i = 0; i &lt; TOTAL_SQUARES; i++) {
</code></pre>

<p>Pour chaque carré il faut sélectionner sa transparence:</p>

<pre><code>ctx.globalAlpha = individual[i].alpha;
</code></pre>

<p>Puis sa couleur:</p>

<pre><code>ctx.fillStyle = 'rgb(' + individual[i].red + ',' +
  individual[i].green + ',' + individual[i].blue + ')';
</code></pre>

<p>On peut alors dessiner un carré:</p>

<pre><code>ctx.fillRect(individual[i].x, individual[i].y,
  individual[i].size, individual[i].size);
</code></pre>

<p>Voilà. Reste à voir maintenant le programme dans son ensemble. Voici les
fichiers HTML et CSS:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;fr&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;picture.css&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;canvas</span> <span class="na">width=</span><span class="s">&quot;400&quot;</span> <span class="na">height=</span><span class="s">&quot;400&quot;</span> <span class="na">id=</span><span class="s">&quot;canvas1&quot;</span><span class="nt">&gt;&lt;/canvas&gt;</span>
</span><span class='line'>    <span class="nt">&lt;canvas</span> <span class="na">width=</span><span class="s">&quot;400&quot;</span> <span class="na">height=</span><span class="s">&quot;400&quot;</span> <span class="na">id=</span><span class="s">&quot;canvas2&quot;</span><span class="nt">&gt;&lt;/canvas&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">&quot;generation&quot;</span><span class="nt">&gt;</span>0<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">&quot;quality&quot;</span><span class="nt">&gt;</span>0<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;picture.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">body</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">background-color</span><span class="o">:</span> <span class="m">#222</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">p</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">color</span><span class="o">:</span> <span class="m">#ccc</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Et voici le programme Javascript complet:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">canvasImgOrigin</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;canvas1&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">canvasGenetic</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;canvas2&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctxOrigin</span> <span class="o">=</span> <span class="nx">canvas1</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas2</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">TOTAL_SQUARES</span> <span class="o">=</span> <span class="mi">400</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">IMAGE_WIDTH</span> <span class="o">=</span> <span class="mi">400</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">IMAGE_HEIGHT</span> <span class="o">=</span> <span class="mi">400</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">SQUARE_MAX_SIZE</span> <span class="o">=</span> <span class="mi">40</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">generation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">htmlGeneration</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;generation&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">htmlQuality</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;quality&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">solution</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">canvasBuffer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">IMAGE_WIDTH</span><span class="p">;</span>
</span><span class='line'><span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ctxBuffer</span> <span class="o">=</span> <span class="nx">canvasBuffer</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">img</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">ctxOrigin</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">};</span>
</span><span class='line'><span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;photo.jpg&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nx">solution</span> <span class="o">=</span> <span class="nx">makeIndividual</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">hillClimb</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">makeIndividual</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">individual</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">TOTAL_SQUARES</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">individual</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">x</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_WIDTH</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">y</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">size</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">SQUARE_MAX_SIZE</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">red</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">green</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">blue</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">alpha</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">individual</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">renderIndividual</span><span class="p">(</span><span class="nx">individual</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">IMAGE_WIDTH</span><span class="p">,</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">);</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">TOTAL_SQUARES</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">globalAlpha</span> <span class="o">=</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">alpha</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;rgb(&#39;</span> <span class="o">+</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">red</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">green</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">blue</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">y</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">size</span><span class="p">,</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">size</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">quality</span><span class="p">(</span><span class="nx">individual</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">imgOrigin</span> <span class="o">=</span> <span class="nx">ctxOrigin</span><span class="p">.</span><span class="nx">getImageData</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">IMAGE_WIDTH</span><span class="p">,</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">pixelArrayOrigin</span> <span class="o">=</span> <span class="nx">imgOrigin</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">score</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">renderIndividual</span><span class="p">(</span><span class="nx">individual</span><span class="p">,</span> <span class="nx">ctxBuffer</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">imgBuffer</span> <span class="o">=</span> <span class="nx">ctxBuffer</span><span class="p">.</span><span class="nx">getImageData</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">pixelArrayCandidate</span> <span class="o">=</span> <span class="nx">imgBuffer</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">pixelArrayOrigin</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">score</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">pixelArrayOrigin</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">-</span> <span class="nx">pixelArrayCandidate</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
</span><span class='line'>    <span class="nx">score</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">pixelArrayOrigin</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">pixelArrayCandidate</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
</span><span class='line'>    <span class="nx">score</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">pixelArrayOrigin</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">pixelArrayCandidate</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">score</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">hillClimb</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">opponent</span> <span class="o">=</span> <span class="nx">mutate</span><span class="p">(</span><span class="nx">copy</span><span class="p">(</span><span class="nx">solution</span><span class="p">));</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">score_opponent</span> <span class="o">=</span> <span class="nx">quality</span><span class="p">(</span><span class="nx">opponent</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">score_solution</span> <span class="o">=</span> <span class="nx">quality</span><span class="p">(</span><span class="nx">solution</span><span class="p">);</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">score_opponent</span> <span class="o">&gt;</span> <span class="nx">score_solution</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">solution</span> <span class="o">=</span> <span class="nx">opponent</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">generation</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">generation</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">renderIndividual</span><span class="p">(</span><span class="nx">solution</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">htmlGeneration</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">generation</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">htmlQuality</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">score_solution</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">generation</span> <span class="o">&gt;=</span> <span class="mi">100000</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">copy</span><span class="p">(</span><span class="nx">individual</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">indiCopy</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">TOTAL_SQUARES</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">objectCopy</span> <span class="o">=</span> <span class="p">{},</span>
</span><span class='line'>        <span class="nx">prop</span><span class="p">;</span>
</span><span class='line'>    <span class="k">for</span><span class="p">(</span><span class="nx">prop</span> <span class="k">in</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">objectCopy</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">individual</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">prop</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">indiCopy</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">objectCopy</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">indiCopy</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">mutate</span><span class="p">(</span><span class="nx">individual</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">gene</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">TOTAL_SQUARES</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">squareProperty</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">7</span><span class="p">);</span>
</span><span class='line'>  <span class="k">switch</span> <span class="p">(</span><span class="nx">squareProperty</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_WIDTH</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">size</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">SQUARE_MAX_SIZE</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">red</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">green</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">blue</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">alpha</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">individual</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pour le faire tourner vous aurez besoin d&#8217;une photo de 400x400 pixels et
de beaucoup de patience… Avec Firefox, ça marche tout seul mais avec
Chrome il faudra passer par un serveur Web. Si Ruby est installé sur
votre machine, vous pouvez démarrer un serveur en entrant ceci dans un
terminal (même répertoire que votre fichier HTML):</p>

<pre><code>ruby -rwebrick -e'WEBrick::HTTPServer.new(:Port =&gt; 3000, :DocumentRoot =&gt; Dir.pwd).start'
</code></pre>

<p>Le code se trouve aussi sur Github: <a href="https://github.com/lkdjiin/picture_genetic_algorithm">github.com/lkdjiin/picture_genetic_algorithm</a>.
Je suis sûr que certains d&#8217;entre-vous connaissent Javascript bien mieux que
moi et peuvent l&#8217;améliorer, alors n&#8217;hésitez pas.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/20/les-algorithmes-genetiques-demystifies-35/'>Les algorithmes génétiques démystifiés 35</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/18/les-algorithmes-genetiques-demystifies-34/'>Les algorithmes génétiques démystifiés 34</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/16/les-algorithmes-genetiques-demystifies-imagerie/'>Les algorithmes génétiques démystifiés: Imagerie</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Apprendre Ruby en faisant des maths]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/21/apprendre-ruby-en-faisant-des-maths/"/>
    <updated>2013-10-21T21:09:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/21/apprendre-ruby-en-faisant-des-maths</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>J&#8217;ai eu récemment à aider quelqu&#8217;un en mathématique (niveau 3ème), et ce
quelqu&#8217;un connaissait un peu Ruby. On a joué avec le langage pour faire
des maths. C&#8217;était drôle et intéressant. Ça m&#8217;a donné l&#8217;idée de
continuer cette affaire sur mon blog. Cette nouvelle série d&#8217;articles
s&#8217;adresse à celles et ceux qui débutent Ruby et qui ont un niveau de math de
3ème.</p>

<!-- more -->


<p>Le premier problème auquel on va essayer de répondre en utilisant Ruby est
le suivant:</p>

<blockquote><p>Afficher toutes les paires de nombres amiables jusqu&#8217;à 10.000.</p></blockquote>


<p>Si vous avez besoin de vous rafraichir la mémoire sur les nombres
amiables, voici <a href="http://fr.wikipedia.org/wiki/Nombre_amical">l&#8217;article de wikipédia</a>.
Et en voici une définition rapide:</p>

<p>si <em>f</em>(n) est une fonction qui calcule la
somme des diviseurs stricts de n, alors n et m sont amiables si
<em>f</em>(n) = m et <em>f</em>(m) = n.</p>

<h2>Obtenir les diviseurs d&#8217;un nombre</h2>

<p>La première chose à faire est de calculer les diviseurs d&#8217;un nombre n.
Pour mémoire, les diviseurs de 8, par exemple, sont 1 ; 2 ; 4 et 8.
Pour les trouver, une méthode consiste à diviser 8 par chaque nombre de 1 à 8
et à regarder le reste de la division. Si il reste 0, c&#8217;est un diviseur, sinon
ce n&#8217;est pas un diviseur. En Ruby, calculer le reste d&#8217;une division se fait
avec l&#8217;opérateur <code>%</code> (le modulo):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="go">[~]⇒ irb</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">1</span>
</span><span class='line'><span class="go">0</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">2</span>
</span><span class='line'><span class="go">0</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">3</span>
</span><span class='line'><span class="go">2</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">4</span>
</span><span class='line'><span class="go">0</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">5</span>
</span><span class='line'><span class="go">3</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">6</span>
</span><span class='line'><span class="go">2</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">7</span>
</span><span class='line'><span class="go">1</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">8</span> <span class="o">%</span> <span class="mi">8</span>
</span><span class='line'><span class="go">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>On voit bien que les diviseurs de 8, soit 1, 2, 4 et 8 renvoient bien 0.
Évidemment, il n&#8217;est pas question de se taper tout ces chiffres <em>à la main</em>,
imaginez un peu que vous vouliez connaitre les diviseurs de 123456789 !
Il nous faut quelque chose pour produire automatiquement les nombres de 1 à
n. En Ruby, on appelle ça un <code>Range</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">8</span>
</span><span class='line'><span class="go">1..8</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pour y voir plus clair, on va appeler la méthode <code>to_a</code> sur ce <code>Range</code>, qui
va nous le transformer en un tableau (<code>Array</code>). Vous pouvez pensez à un
tableau comme à une simple liste:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span>
</span><span class='line'><span class="go">[1, 2, 3, 4, 5, 6, 7, 8]</span>
</span></code></pre></td></tr></table></div></figure>


<p>On a bien une liste des nombres de 1 à 8. Notez que les parenthèses sont ici
nécessaires, sinon la méthode <code>to_a</code> serait appelée sur le chiffre 8, et
c&#8217;est pas bon:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">8</span><span class="o">.</span><span class="n">to_a</span>
</span><span class='line'><span class="go">NoMethodError: undefined method `to_a&#39; for 8:Fixnum</span>
</span></code></pre></td></tr></table></div></figure>


<p>La prochaine fois on verra comment sélectionner dans cette liste seulement
les nombres qui nous intéressent, c&#8217;est à dire les diviseurs.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4/'>Apprendre Ruby en faisant des maths 4</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Les algorithmes génétiques démystifiés 35]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/20/les-algorithmes-genetiques-demystifies-35/"/>
    <updated>2013-10-20T21:21:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/20/les-algorithmes-genetiques-demystifies-35</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p>On continue aujourd&#8217;hui avec la mise en place de l&#8217;algorithme de <em>Hill-climbing</em>
pour s&#8217;assurer que la fonction d&#8217;évaluation de nos images est pertinente.</p>

<!-- more -->


<p>J&#8217;ai déjà parlé du <em>Hill-climbing</em> dans
<a href="http://lkdjiin.github.io/blog/2013/09/17/les-algorithmes-genetiques-demystifies-16-le-hill-climbing/">cet article</a>.
On peut le considérer comme une version très basique d&#8217;un algorithme
génétique, sans population et sans reproduction. Utile donc, pour
tester rapidement et facilement l&#8217;évaluation:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">solution</span> <span class="o">=</span> <span class="nx">makeIndividual</span><span class="p">();</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">generation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">htmlGeneration</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;generation&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">htmlQuality</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;quality&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">hillClimb</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">hillClimb</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">opponent</span> <span class="o">=</span> <span class="nx">mutate</span><span class="p">(</span><span class="nx">copy</span><span class="p">(</span><span class="nx">solution</span><span class="p">));</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">score_opponent</span> <span class="o">=</span> <span class="nx">quality</span><span class="p">(</span><span class="nx">opponent</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">score_solution</span> <span class="o">=</span> <span class="nx">quality</span><span class="p">(</span><span class="nx">solution</span><span class="p">);</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">score_opponent</span> <span class="o">&gt;</span> <span class="nx">score_solution</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">solution</span> <span class="o">=</span> <span class="nx">opponent</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">generation</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">generation</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">renderIndividual</span><span class="p">(</span><span class="nx">solution</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">htmlGeneration</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">generation</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">htmlQuality</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">score_solution</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">generation</span> <span class="o">&gt;=</span> <span class="mi">100000</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Les explications maintenant. À chaque tour on compare les scores obtenus
par la solution courante (la meilleure jusqu&#8217;ici) avec une version mutée
de lui-même (<code>opponent</code>). Si l&#8217;opposant est meilleur, il prend la place
de la solution:</p>

<pre><code>var opponent = mutate(copy(solution));
var score_opponent = quality(opponent);
var score_solution = quality(solution);
if (score_opponent &gt; score_solution) {
  solution = opponent;
}
</code></pre>

<p>J&#8217;affiche ensuite la solution courante, toutes les 100 générations:</p>

<pre><code>generation++;
if (generation % 100 == 0) renderIndividual(solution, ctx);
</code></pre>

<p>À chaque tour, j&#8217;affiche la génération courante et son score:</p>

<pre><code>htmlGeneration.innerHTML = generation;
htmlQuality.innerHTML = score_solution;
</code></pre>

<p>Enfin, on stoppe tout au bout de 100.000 essais:</p>

<pre><code>if (generation &gt;= 100000) {
  clearInterval(interval);
}
</code></pre>

<p>La fonction de mutation est longue, mais simple. On sélectionne au hasard
un carré et une de ses propriétés puis on la modifie:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">mutate</span><span class="p">(</span><span class="nx">individual</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">gene</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">TOTAL_SQUARES</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">squareProperty</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">7</span><span class="p">);</span>
</span><span class='line'>  <span class="k">switch</span> <span class="p">(</span><span class="nx">squareProperty</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_WIDTH</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">size</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">SQUARE_MAX_SIZE</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">red</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">green</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">blue</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">);</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>
</span><span class='line'>      <span class="nx">individual</span><span class="p">[</span><span class="nx">gene</span><span class="p">].</span><span class="nx">alpha</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
</span><span class='line'>      <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">individual</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>La prochaine fois on verra deux dernières fonctions <em>techniques</em>:
<code>copy</code> et <code>renderIndividual</code> et on sera près à faire tourner
notre algorithme.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/22/les-algorithmes-genetiques-demystifies-36/'>Les algorithmes génétiques démystifiés 36</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/18/les-algorithmes-genetiques-demystifies-34/'>Les algorithmes génétiques démystifiés 34</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/16/les-algorithmes-genetiques-demystifies-imagerie/'>Les algorithmes génétiques démystifiés: Imagerie</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Programmation fonctionnelle pour les développeurs Ruby]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/19/programmation-fonctionnelle-pour-les-developpeurs-ruby/"/>
    <updated>2013-10-19T16:43:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/19/programmation-fonctionnelle-pour-les-developpeurs-ruby</id>
    <content type="html"><![CDATA[<p>Si vous êtes comme moi, la programmation fonctionnelle vous intéresse,
mais vous n&#8217;y comprenez pas grand chose…
Je vous encourage à regarder cette conférence de Jessica Kerr:
<a href="http://vimeo.com/75181845">Functional Principles for Ruby Developers</a>.</p>

<!-- more -->


<p>Elle y développe une analogie que j&#8217;ai beaucoup aimé: C&#8217;est Watson qui
demande
à Sherlock Holmes «Vous saviez qu&#8217;on a découvert une nouvelle planète dans
le système solaire ?». Et Holmes de répondre un truc du genre «Non. Pourtant
vous venez de me le dire, mais je l&#8217;ai déjà oublié.»</p>

<p>Dans cette histoire, Holmes ne veut pas remplir son cerveau avec ce genre
d&#8217;information qui lui est inutile pour résoudre ses enquêtes. Il se contente
de savoir ce dont il a besoin.</p>

<p>Jessica Kerr nous explique que c&#8217;est cela la programmation fonctionnelle:
se contenter de faire seulement ce qu&#8217;on a à faire, sans toucher au monde
extérieur. Et elle nous explique comment le faire en Ruby.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4/'>Apprendre Ruby en faisant des maths 4</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Les algorithmes génétiques démystifiés 34]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/18/les-algorithmes-genetiques-demystifies-34/"/>
    <updated>2013-10-18T20:44:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/18/les-algorithmes-genetiques-demystifies-34</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p>Après avoir vu comment créer un individu qui représente une image,
on regarde aujourd&#8217;hui comment évaluer une image.</p>

<!-- more -->


<p>N&#8217;étant pas familier du traitement d&#8217;image et de tout ce qui s&#8217;y rapporte,
j&#8217;avoue avoir eu un petit instant de panique quand je me suis demandé:
«Comment savoir, entre deux images, laquelle est <em>la plus proche</em> d&#8217;une image
de référence ?».</p>

<p>Et puis j&#8217;ai respiré un bon coup: après tout une image n&#8217;est rien d&#8217;autre
qu&#8217;une liste de données, on a qu&#8217;à faire au plus simple, c&#8217;est à dire
comparer chaque pixel. Y&#8217;avait vraiment pas de quoi paniquer ! Voilà donc
la fonction <code>quality</code> qui mesure la similitude entre une image d&#8217;origine
et une image candidate:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">quality</span><span class="p">(</span><span class="nx">individual</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">imgOrigin</span> <span class="o">=</span> <span class="nx">ctxOrigin</span><span class="p">.</span><span class="nx">getImageData</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">IMAGE_WIDTH</span><span class="p">,</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">pixelArrayOrigin</span> <span class="o">=</span> <span class="nx">imgOrigin</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">score</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">renderIndividual</span><span class="p">(</span><span class="nx">individual</span><span class="p">,</span> <span class="nx">ctxBuffer</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">imgBuffer</span> <span class="o">=</span> <span class="nx">ctxBuffer</span><span class="p">.</span><span class="nx">getImageData</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">IMAGE_WIDTH</span><span class="p">,</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">pixelArrayCandidate</span> <span class="o">=</span> <span class="nx">imgBuffer</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">pixelArrayOrigin</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">score</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">pixelArrayOrigin</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">-</span> <span class="nx">pixelArrayCandidate</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
</span><span class='line'>    <span class="nx">score</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">pixelArrayOrigin</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">pixelArrayCandidate</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
</span><span class='line'>    <span class="nx">score</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">pixelArrayOrigin</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">pixelArrayCandidate</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">score</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>C&#8217;est parti pour quelques explications. On récupère les pixels de
l&#8217;image d&#8217;origine (qui se trouve dans un canvas) dans la variable
<code>pixelArrayOrigin</code>:</p>

<pre><code>var imgOrigin = ctxOrigin.getImageData(0, 0, IMAGE_WIDTH, IMAGE_HEIGHT);
var pixelArrayOrigin = imgOrigin.data;
</code></pre>

<p>Ensuite, on construit l&#8217;image candidate dans un canvas non-affiché. La
fonction <code>renderIndividual</code> sera détaillée plus tard:</p>

<pre><code>renderIndividual(individual, ctxBuffer);
</code></pre>

<p>On récupère les pixels de cette image candidate dans <code>pixelArrayCandidate</code>:</p>

<pre><code>var imgBuffer = ctxBuffer.getImageData(0, 0, IMAGE_WIDTH, IMAGE_HEIGHT);
var pixelArrayCandidate = imgBuffer.data;
</code></pre>

<p>Maintenant on vérifie les pixels un à un. Un pixel est représenté par quatre
nombres, respectivement rouge, vert, bleu et alpha. Le score augmente de la
différence entre les composantes rouges, vertes et bleues:</p>

<pre><code>for (var i = 0, n = pixelArrayOrigin.length; i &lt; n; i += 4) {
  score += Math.abs(pixelArrayOrigin[i] - pixelArrayCandidate[i]);
  score += Math.abs(pixelArrayOrigin[i+1] - pixelArrayCandidate[i+1]);
  score += Math.abs(pixelArrayOrigin[i+2] - pixelArrayCandidate[i+2]);
}
</code></pre>

<p>Finalement on retourne l&#8217;inverse pour avoir un score compris entre
0 et 1:</p>

<pre><code>return 1 / score;
</code></pre>

<p>La prochaine fois, on met l&#8217;algorithme de <em>Hill-Climbing</em> en place.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/22/les-algorithmes-genetiques-demystifies-36/'>Les algorithmes génétiques démystifiés 36</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/20/les-algorithmes-genetiques-demystifies-35/'>Les algorithmes génétiques démystifiés 35</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/16/les-algorithmes-genetiques-demystifies-imagerie/'>Les algorithmes génétiques démystifiés: Imagerie</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ruby 2.0: Tableaux littéraux pour les symboles]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/17/ruby-2-dot-0-tableaux-litteraux-pour-les-symboles/"/>
    <updated>2013-10-17T10:48:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/17/ruby-2-dot-0-tableaux-litteraux-pour-les-symboles</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>La version 2.0 de Ruby gagne une nouvelle syntaxe pour la définition
de tableaux de symboles : <code>%i</code>.</p>

<p>On a maintenant le choix pour définir un tableau de symboles entre les deux
syntaxes suivantes:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="ss">:voici</span><span class="p">,</span> <span class="ss">:plusieurs</span><span class="p">,</span> <span class="ss">:symboles</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="o">%</span><span class="n">i</span><span class="p">(</span> <span class="n">voici</span> <span class="n">plusieurs</span> <span class="n">symboles</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<!-- more -->


<p>On y gagne en clarté mais aussi, le langage y gagne en cohérence. On est
habitué à utiliser <code>%w</code> pour les tableaux de chaînes de caractères, il n&#8217;y
avait pas de raison pour qu&#8217;on ne puisse pas le faire avec des symboles.
J&#8217;aime beaucoup cette nouvelle possibilité, même si je ne vois pas
le rapport entre la lettre <code>i</code> et les symboles…</p>

<p>Il existe aussi une version qui permet l&#8217;interpolation, c&#8217;est <code>%I</code> (avec
un i majuscule). Vous pouvez voir la différence entre <code>%i</code> et <code>%I</code> dans la
session suivante:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="o">%</span><span class="n">i</span><span class="p">(</span> <span class="c1">#{&quot;bé&quot; + &quot;po&quot;} azerty )</span>
</span><span class='line'><span class="go">[</span>
</span><span class='line'><span class="go">    [0] :&quot;\#{\&quot;bé\&quot;&quot;,</span>
</span><span class='line'><span class="go">    [1] :+,</span>
</span><span class='line'><span class="go">    [2] :&quot;\&quot;po\&quot;}&quot;,</span>
</span><span class='line'><span class="go">    [3] :azerty</span>
</span><span class='line'><span class="go">]</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="o">%</span><span class="n">I</span><span class="p">(</span> <span class="c1">#{&quot;bé&quot; + &quot;po&quot;} azerty )</span>
</span><span class='line'><span class="go">[</span>
</span><span class='line'><span class="go">    [0] :bépo,</span>
</span><span class='line'><span class="go">    [1] :azerty</span>
</span><span class='line'><span class="go">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/14/ruby-2-dot-0-les-arguments-nommes/'>Ruby 2.0: Les arguments nommés</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/10/ruby-2-dot-0-raffinement-de-methode/'>Ruby 2.0: Raffinement de méthode</a></li><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Les algorithmes génétiques démystifiés: Imagerie]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/16/les-algorithmes-genetiques-demystifies-imagerie/"/>
    <updated>2013-10-16T16:31:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/16/les-algorithmes-genetiques-demystifies-imagerie</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p>Bonjour, aujourd&#8217;hui on commence une nouvelle étude sur les algorithmes
génétiques avec un problème sympa : recréer une photo à partir de plusieurs
carrés de tailles et de couleurs différentes. Au début, l&#8217;image est
générée au hasard:</p>

<p><img src="http://lkdjiin.github.io/images/Capture-13.jpg"></p>

<p>Puis, petit à petit, elle converge vers la photo d&#8217;origine:</p>

<p><img src="http://lkdjiin.github.io/images/Capture-11.jpg"></p>

<!-- more -->


<p>Avant tout, il faut réfléchir à deux choses: la représentation des individus
et l&#8217;évaluation. De plus, comme je l&#8217;ai déjà mentionné, Javascript n&#8217;est pas
mon fort. Alors plutôt que d&#8217;écrire tout de suite un algorithme génétique, je
vais d&#8217;abord essayer de mettre en place un algorithme de <em>Hill Climbing</em>.</p>

<h2>Les individus</h2>

<p>Chaque <em>solution/individu</em> sera composé de quelques centaines de petits carrés.
Chaque carré pourra être personnalisé grâce à:</p>

<ul>
<li>sa position x</li>
<li>sa position y</li>
<li>sa taille</li>
<li>sa couleur (rouge, vert et bleu)</li>
<li>sa transparence</li>
</ul>


<p>Voici comment je traduis ça en Javascript:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">makeIndividual</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">individual</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">TOTAL_SQUARES</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">individual</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">x</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_WIDTH</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">y</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_HEIGHT</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">size</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">IMAGE_WIDTH</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">red</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">green</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">blue</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">alpha</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">individual</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Techniquement, un individu est donc une liste de gènes, et un gène est un
objet avec les propriétés x, y, size, red, green, blue et alpha.</p>

<p>La prochaine fois on verra comment on peut évaluer nos images.</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/22/les-algorithmes-genetiques-demystifies-36/'>Les algorithmes génétiques démystifiés 36</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/20/les-algorithmes-genetiques-demystifies-35/'>Les algorithmes génétiques démystifiés 35</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/18/les-algorithmes-genetiques-demystifies-34/'>Les algorithmes génétiques démystifiés 34</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Un article par jour pendant un an: Bilan des 100 jours]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/15/un-article-par-jour-pendant-un-an-bilan-des-100-jours/"/>
    <updated>2013-10-15T11:37:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/15/un-article-par-jour-pendant-un-an-bilan-des-100-jours</id>
    <content type="html"><![CDATA[<p>Comme certains d&#8217;entre vous le savent, j&#8217;écris un article par jour pendant
un an. Et aujourd&#8217;hui c&#8217;est le 100ème jour !
Déjà 100 articles, ou bien seulement 100 articles, ça dépend du moment.
Quoiqu&#8217;il en soit, c&#8217;est un jour parfait pour un petit bilan.</p>

<!-- more -->


<p>Pendant cette période de 100 jours, 3780 visiteurs uniques
ont vus plus de 20.000 pages. Ce sont des chiffres extraordinaires pour
moi: en débutant cette aventure je ne comptais absolument pas être lu,
j&#8217;osais à peine envisager 3 ou 4 visites par jour. Bref, je suis
un bloggeur heureux !</p>

<p>Pour ce qui est des statistiques navigateur/OS, voici le top 3 dans
chaque catégorie, au cas ou quelqu&#8217;un serait intéressé:</p>

<pre><code>Chrome    52%
Firefox   36%
Safari     8%

Windows   39%
Linux     26%
Macintosh 23%
</code></pre>

<p>Et maintenant le top/flop. L&#8217;article le plus lu est
<a href="http://lkdjiin.github.io/blog/2013/08/28/les-algorithmes-genetiques-demystifies/">les algorithmes génétiques démystifiés</a>,
avec 984 vues. Je ne pensais vraiment pas intéresser beaucoup de monde avec
ça. Ce fut une très agréable surprise, étant donné que ce sujet me tient
particulièrement à coeur.</p>

<p>Quand à l&#8217;article le moins lu c&#8217;est <a href="http://lkdjiin.github.io/blog/2013/08/17/implementer-un-langage-sur-parrot-partie-8-la-grammaire/">Implémenter un langage sur Parrot: la grammaire</a>
avec 22 petites vues. C&#8217;est d&#8217;ailleurs toute la série sur Parrot qui a fait
flop. En relisant ces articles, je m&#8217;aperçois qu&#8217;ils sont mal conçus et mal
écrits. J&#8217;essaierais donc de faire mieux pour les 260 et quelques jours qui
viennent ;&ndash;)</p>

<p>Merci de me lire,<br/>
À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/08/09/un-mois-darticles-quotidiens-le-bilan/'>Un mois d&#8217;articles quotidiens: le bilan</a></li><li><a href='http://lkdjiin.github.io/blog/2013/07/08/nouveau-defi-un-article-par-jour-pendant-un-an/'>Nouveau défi: un article par jour pendant un an</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/29/je-vais-apprendre-scheme/'>Je vais apprendre Scheme</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ruby 2.0: Les arguments nommés]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/14/ruby-2-dot-0-les-arguments-nommes/"/>
    <updated>2013-10-14T19:04:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/14/ruby-2-dot-0-les-arguments-nommes</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Les arguments nommés étaient absents de Ruby jusqu&#8217;à sa version 2.0, curieux
pour un langage qui fait tellement penser à Smalltalk.</p>

<!-- more -->


<p>Il était bien sûr possible de les <em>simuler</em> en utilisant un hash, un peu
comme ce qu&#8217;on fait en Javascript:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">person</span><span class="p">(</span><span class="n">opts</span> <span class="o">=</span> <span class="p">{})</span>
</span><span class='line'>  <span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span><span class="nb">name</span><span class="p">:</span> <span class="s2">&quot;toto&quot;</span><span class="p">,</span> <span class="ss">age</span><span class="p">:</span> <span class="mi">99</span><span class="p">}</span>
</span><span class='line'>  <span class="n">opts</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">merge</span> <span class="n">opts</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">opts</span><span class="o">[</span><span class="ss">:name</span><span class="o">]</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">opts</span><span class="o">[</span><span class="ss">:age</span><span class="o">]</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Mais bof. Ça ressemble à tout sauf à du Ruby. C&#8217;est un <em>hack</em>, un truc, une
astuce, tout ce qu&#8217;on veut mais ça ne s&#8217;intègre pas au langage.
Voici la même méthode, avec cette fois-ci des arguments nommés:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">person</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s2">&quot;toto&quot;</span><span class="p">,</span> <span class="ss">age</span><span class="p">:</span> <span class="mi">99</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="nb">name</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">age</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Et voici comment différentes manières d&#8217;appeler cette méthode:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">person</span>
</span><span class='line'><span class="n">person</span> <span class="nb">name</span><span class="p">:</span> <span class="s2">&quot;oscar&quot;</span>
</span><span class='line'><span class="n">person</span> <span class="ss">age</span><span class="p">:</span> <span class="mi">18</span>
</span><span class='line'><span class="n">person</span> <span class="nb">name</span><span class="p">:</span> <span class="s2">&quot;oscar&quot;</span><span class="p">,</span> <span class="ss">age</span><span class="p">:</span> <span class="mi">18</span>
</span><span class='line'><span class="n">person</span> <span class="ss">age</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="nb">name</span><span class="p">:</span> <span class="s2">&quot;oscar&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Cool, ça fonctionne dans tous les sens. Par contre, pas question d&#8217;oublier
le nom de l&#8217;argument:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="go">person &quot;oscar&quot;, 18</span>
</span><span class='line'><span class="go">ArgumentError: wrong number of arguments (2 for 0)</span>
</span></code></pre></td></tr></table></div></figure>


<p>On peut aussi mélanger arguments normaux et nommés, à condition que les
arguments nommés viennent après. Le code suivant est valide:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">person</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="ss">age</span><span class="p">:</span> <span class="mi">99</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="nb">name</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">age</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">person</span> <span class="s2">&quot;oscar&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Mais pas celui-ci:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='irb'><span class='line'><span class="gp">&gt;&gt; </span><span class="k">def</span> <span class="nf">person</span><span class="p">(</span><span class="ss">age</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="nb">name</span><span class="p">)</span>
</span><span class='line'><span class="gp">&gt;&gt; </span><span class="k">end</span>
</span><span class='line'><span class="go">SyntaxError: (irb):1: syntax error, unexpected tIDENTIFIER</span>
</span><span class='line'><span class="go">def person(age: 99, name)</span>
</span><span class='line'><span class="go">                        ^</span>
</span></code></pre></td></tr></table></div></figure>


<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/10/17/ruby-2-dot-0-tableaux-litteraux-pour-les-symboles/'>Ruby 2.0: Tableaux littéraux pour les symboles</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/10/ruby-2-dot-0-raffinement-de-methode/'>Ruby 2.0: Raffinement de méthode</a></li><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li></ul></section></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vim: Créez des présentations avec Vimdeck]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/13/vim-creez-des-presentations-avec-vimdeck/"/>
    <updated>2013-10-13T13:17:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/13/vim-creez-des-presentations-avec-vimdeck</id>
    <content type="html"><![CDATA[<p>Vimdeck est un programme écrit en Ruby qui transforme un fichier texte au
format Markdown en plusieurs <em>slides</em> pour effectuer une présentation avec
l&#8217;éditeur de texte Vim !</p>

<!-- more -->


<h2>Installation</h2>

<p>Installez tout d&#8217;abord le plugin Vim <a href="https://github.com/vim-scripts/SyntaxRange">SyntaxRange</a>.</p>

<p>Ensuite, installez le programme de manière classique:</p>

<pre><code>gem install vimdeck
</code></pre>

<p>Note: J&#8217;ai eu un problème de dépendance (sur Debian) et il a fallu installer la
librairie systême <code>libmagickwand-dev</code> pour que tout fonctionne bien.</p>

<h2>Utilisation</h2>

<p>Maintenant on écrit notre présentation au format Markdown, par exemple:</p>

<pre><code># Premier slide

- Premier point
- Second point
- Troisième point


# Deuxième slide

- Premier
{~- Deuxième point~}
{~- Troisième point~}


# Troisième et dernier slide

```ruby
class Foo
  def bar
    puts "Hello Vimdeck!"
  end
end
```
</code></pre>

<p>Et on lance la présentation ainsi:</p>

<pre><code>vimdeck mon_fichier.md
</code></pre>

<p>Ensuite, on change de slide avec les touches PageUp/PageDown.</p>

<p>Vous pouvez voir des captures d&#8217;écrans sur le <a href="https://github.com/tybenz/vimdeck">site du projet</a>.</p>

<h2>Conclusion</h2>

<p>Bon, le projet est un peu jeune et pas mal buggé, mais l&#8217;idée est vraiment
intéressante. C&#8217;est totalement improbable, complêtement loufoque, inutilisable
avec des graphiques, donc
rigoureusement indispensable, ne serait-ce que pour frimer devant les
collègues: «Regardez comment je fais une présentation en 3 minutes avec mon
éditeur de texte…».</p>

<p>À demain.</p>

<p><section><h1>Articles connexes</h1><ul><li><a href='http://lkdjiin.github.io/blog/2013/11/01/apprendre-ruby-en-faisant-des-maths-6-methodes-utilitaires-et-module/'>Apprendre Ruby en faisant des maths 6: méthodes utilitaires et module</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/30/apprendre-ruby-en-faisant-des-maths-5/'>Apprendre Ruby en faisant des maths 5</a></li><li><a href='http://lkdjiin.github.io/blog/2013/10/28/apprendre-ruby-en-faisant-des-maths-4/'>Apprendre Ruby en faisant des maths 4</a></li></ul></section></p>
]]></content>
  </entry>
  
</feed>
