
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Écrire un jeu en 2d avec Ruby et Gosu - partie 8 - Xavier Nayrac</title>
  <meta name="author" content="Xavier Nayrac">

  
  <meta name="description" content="Dans ce 8ème article de la série consacrée à la création d’un jeu en 2d avec
Ruby et Gosu, nous allons mettre en place les niveaux. Juste la &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lkdjiin.github.io/blog/2016/05/08/ecrire-un-jeu-en-2d-avec-ruby-et-gosu-partie-8">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Xavier Nayrac" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39286891-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><a href="/">
  <img src="http://www.gravatar.com/avatar/f6d0dff2dbb2fdc08fb1318116ea572c?s=140"/>
</a>
<h1><a href="/">Xavier Nayrac</a></h1>
<h2>
  Accro au TDD, rubyiste mais pas que, maker, heureux utilisateur de Vim,
  accordéoniste.<br/>
  Si vous vous sentez particulièrement généreux,
  <a href="https://twitter.com/lkdjiin">suivez moi sur Twitter</a>.
</h2>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"><img src="/images/rss.png"></img>
    RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="lkdjiin.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Chercher"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Écrire un jeu en 2d avec Ruby et Gosu - partie 8</h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-05-08T19:54:00+02:00" pubdate data-updated="true">8 mai 2016</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Dans ce 8ème article de la série consacrée à la création d’un jeu en 2d avec
Ruby et Gosu, nous allons mettre en place les niveaux.</p>

<p><img class="center" src="/images/gosu9.png" /></p>

<!-- more -->

<h2 id="juste-la-mcanique">Juste la mécanique</h2>

<p>Dans un premier temps, nous allons mettre en place un mécanisme qui permettra
d’avoir facilement des niveaux, mais nous garderons le jeu tel qu’il est
actuellement. J’ai décidé que les niveaux du jeu seraient configurés dans un
fichier YAML.  Voici donc un fichier de niveaux minimum :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>levels.yaml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="yaml"><span class="line"><span class="p-Indicator">-</span>
</span><span class="line">  <span class="l-Scalar-Plain">song</span><span class="p-Indicator">:</span> <span class="s">&quot;assets/songs/Around</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Bend.ogg&quot;</span>
</span><span class="line">  <span class="l-Scalar-Plain">goal</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">15</span>
</span><span class="line">
</span><span class="line"><span class="p-Indicator">-</span>
</span><span class="line">  <span class="l-Scalar-Plain">song</span><span class="p-Indicator">:</span> <span class="s">&quot;assets/songs/Catch</span><span class="nv"> </span><span class="s">The</span><span class="nv"> </span><span class="s">Mystery.ogg&quot;</span>
</span><span class="line">  <span class="l-Scalar-Plain">goal</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">25</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Chaque entrée dans le fichier YAML (donc chaque niveau dans le jeu) comporte
une musique et un objectif (<em>goal</em>).  Cet objectif est le nombre de sourires à
collecter pour terminer le niveau. On ajoutera bien sûr un tas d’autres choses
plus tard, mais c’est tout à fait suffisant pour la mise en place des niveaux
dans notre jeu.</p>

<p>Le chargement de ces niveaux peut se faire dans une classe <code>Level</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>level.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Level</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span>
</span><span class="line">    <span class="vi">@levels</span> <span class="o">=</span> <span class="no">YAML</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s1">&#39;levels.yaml&#39;</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Le fichier de niveaux <code>levels.yaml</code> rend inutile le module <code>Song</code> développé
dans le dernier article. On peut donc le supprimer :</p>

<pre><code>rm song.rb
</code></pre>

<blockquote>
  <p>On voit ici que le développement d’un jeu, comme toute application, n’est pas
une simple ligne droite. 
On ne se contente pas d’ajouter du code, on en supprime aussi.
Une structure (ici notre module Song) peut être rendue obsolète après
l’introduction d’une nouvelle structure, d’un nouveau design ou d’une
nouvelle fonctionnalité. Il ne faut pas hésiter à se débarrasser d’un code qui
n’est plus utile.</p>
</blockquote>

<p>La musique pour l’état <em>game over</em> ne s’insère pas dans le schéma du fichier de
niveau. Nous pouvons créer une nouvelle méthode dans la classe SongPlayer et
l’utiliser là où il faut dans la classe Window :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>song_player.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">SongPlayer</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">play_game_over</span>
</span><span class="line">    <span class="n">play</span><span class="p">(</span><span class="s2">&quot;assets/songs/In early time.ogg&quot;</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Window</span> <span class="o">&lt;</span> <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:Window</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">update_game_over</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="vi">@song_player</span><span class="o">.</span><span class="n">play_game_over</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Pour que cela fonctionne, il faut mettre en place notre <code>Level</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Window</span> <span class="o">&lt;</span> <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:Window</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="vi">@level</span> <span class="o">=</span> <span class="no">Level</span><span class="o">.</span><span class="n">new</span>
</span><span class="line">    <span class="vi">@song_player</span> <span class="o">=</span> <span class="no">SongPlayer</span><span class="o">.</span><span class="n">new</span>
</span><span class="line">    <span class="vi">@song_player</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="vi">@level</span><span class="o">.</span><span class="n">song</span><span class="p">)</span> <span class="c1"># &lt;---- Cette méthode n&#39;existe pas encore !</span>
</span><span class="line">    <span class="c1">#...</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">reset</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="vi">@song_player</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="vi">@level</span><span class="o">.</span><span class="n">song</span><span class="p">)</span> <span class="c1"># &lt;----- Idem !</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Vous notez que j’utilise une méthode <code>Level#song</code> qui n’est pas encore codée.
Cette méthode devra retourner le nom de la musique du niveau actuel. Comme nous
n’avons pas encore cette notion de niveau actuel, trichons provisoirement et
retournons invariablement la musique du premier niveau :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Level</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">song</span>
</span><span class="line">    <span class="vi">@levels</span><span class="o">.</span><span class="n">first</span><span class="o">[</span><span class="s1">&#39;song&#39;</span><span class="o">]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Voilà, le jeu tourne exactement comme dans la version précédente, pourtant la
mécanique des niveaux est en place.</p>

<h2 id="affichage-des-sourires-collects">Affichage des sourires collectés</h2>

<p>Un bon premier pas serait de savoir où on en est dans la réalisation de
l’objectif du niveau. Autrement dit, on veut savoir combien de sourires on a
collecté depuis le début du niveau.
Comme première tentative, on peut simplement afficher ce chiffre sur la console à
chaque update de Gosu. Et quelle classe sera la mieux placée pour connaitre
le nombre de sourires collectés pendant le niveau actuel ? La classe <code>Level</code>
bien entendu. Il nous faut deux nouvelles méthodes, <code>collected</code> qui retourne le
nombre de sourires collectés jusqu’à présent et <code>collect</code>, qui incrémente le
nombre de sourires collectés :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Level</span>
</span><span class="line">  <span class="kp">attr_reader</span> <span class="ss">:collected</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span>
</span><span class="line">    <span class="vi">@levels</span> <span class="o">=</span> <span class="no">YAML</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s1">&#39;levels.yaml&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@collected</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="c1"># ...</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">collect</span>
</span><span class="line">    <span class="vi">@collected</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>La classe Player a maintenant besoin de pouvoir parler à l’objet de type Level
pour lui passer le message <code>collect</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Player</span>
</span><span class="line">  <span class="c1"># ...</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="vi">@level</span> <span class="o">=</span> <span class="n">level</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">collision</span><span class="p">(</span><span class="n">type</span><span class="p">)</span>
</span><span class="line">    <span class="k">case</span> <span class="n">type</span>
</span><span class="line">    <span class="k">when</span> <span class="ss">:smiley_up</span>
</span><span class="line">      <span class="c1"># ...</span>
</span><span class="line">      <span class="vi">@level</span><span class="o">.</span><span class="n">collect</span> <span class="c1"># &lt;------- Un sourire collecté !</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Le code qui précède est quelque chose que je n’aime pas faire. <code>Player</code> a
désormais connaissance d’un objet de type <code>Level</code> et peut faire ce qu’il veut
avec. Même si aujourd’hui je <em>sais</em> qu’il ne faut rien faire d’autre que
<code>@level.collect</code>, dans 6 mois ça sera une toute autre histoire. J’aurais oublié
tout ça et quand je verrai cet objet <code>@level</code> je penserai sûrement que je peux
faire ce que je veux avec (<em>c’est à dire modifier tout et n’importe quoi</em>). Et
tout ce que ça pourra produire, c’est un maximum de confusion.</p>

<p>Il y a plusieurs façons de gérer ça et on va en examiner quelques unes dans un
petit moment. Mais terminons d’abord ce que nous étions en train de faire,
c’est à dire l’affichage du nombre de sourires collectés :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Window</span> <span class="o">&lt;</span> <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:Window</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="vi">@level</span> <span class="o">=</span> <span class="no">Level</span><span class="o">.</span><span class="n">new</span>
</span><span class="line">    <span class="vi">@player</span> <span class="o">=</span> <span class="no">Player</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@level</span><span class="p">)</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">update</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="nb">puts</span> <span class="vi">@level</span><span class="o">.</span><span class="n">collected</span> <span class="c1"># &lt;--- On log sur la console pour vérifier</span>
</span><span class="line">  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Si vous lancer le jeu vous verrez le nombre d’objet collectés qui s’affiche à chaque
update de Gosu.</p>

<p>Maintenant parlons de quelques méthodes possibles pour éviter de se trainer un
objet de type <code>Level</code> dans la classe <code>Player</code>.</p>

<ol>
  <li>On pourrait se contenter de mettre un commentaire, encore faudra-t-il le
  voir, le lire et le maintenir.</li>
  <li>On pourrait utiliser un <a href="https://en.wikipedia.org/wiki/Observer_pattern">observer</a>, mais je trouve ça un peu trop,
vu que l’on n’a qu’un seul évènement à déclencher.</li>
  <li>J’imagine qu’on pourrait aussi utiliser un <a href="https://en.wikipedia.org/wiki/Mediator_pattern">mediator</a> entre les classes
<code>Player</code> et <code>Level</code>. Mais là encore je trouve ça trop avec seulement deux
classes.</li>
</ol>

<p>Alors quoi ? Un <a href="https://en.wikipedia.org/wiki/Proxy_pattern">proxy</a> qui sera restreint à la seule méthode <code>collect</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>collector_proxy.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">CollectorProxy</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@level</span> <span class="o">=</span> <span class="n">level</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">collect</span>
</span><span class="line">    <span class="vi">@level</span><span class="o">.</span><span class="n">collect</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Window</span> <span class="o">&lt;</span> <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:Window</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="vi">@level</span> <span class="o">=</span> <span class="no">Level</span><span class="o">.</span><span class="n">new</span>
</span><span class="line">    <span class="vi">@player</span> <span class="o">=</span> <span class="no">Player</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="no">CollectorProxy</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@level</span><span class="p">))</span>
</span><span class="line">    <span class="c1"># ...</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>De cette manière, un <code>Player</code> ne pourra rien faire d’autre qu’appeler la 
méthode <code>collect</code> sur ce fameux <code>@level</code>.</p>

<h2 id="visualisation-de-ltat-davancement-du-niveau">Visualisation de l’état d’avancement du niveau</h2>

<p>On va afficher le numéro du niveau en haut à droite, et une petite barre
d’avancement sous les pieds du joueur pour savoir où on en est dans la collecte
des sourires.</p>

<p>La majeure partie des modifications se situe dans la classe <code>UI</code>, n’hésitez pas
à remplacer les nombres magiques restants par des constantes :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">UI</span>
</span><span class="line">  <span class="no">Yellow</span> <span class="o">=</span> <span class="mh">0xff_ffff00</span>
</span><span class="line">
</span><span class="line">  <span class="c1"># ...</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="n">draw_level</span><span class="p">(</span><span class="n">game</span><span class="o">[</span><span class="ss">:level</span><span class="o">]</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">draw_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span class="line">    <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:draw_rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">477</span><span class="p">,</span> <span class="n">achieved_part</span><span class="p">(</span><span class="n">level</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="no">Yellow</span><span class="p">,</span> <span class="ss">ZOrder</span><span class="p">:</span><span class="ss">:UI</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="vi">@font</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s2">&quot;Level: </span><span class="si">#{</span><span class="n">level</span><span class="o">[</span><span class="ss">:number</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">550</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="ss">ZOrder</span><span class="p">:</span><span class="ss">:UI</span><span class="p">,</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
</span><span class="line">               <span class="no">Yellow</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">achieved_part</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</span><span class="line">    <span class="no">WindowWidth</span> <span class="o">/</span> <span class="n">level</span><span class="o">[</span><span class="ss">:goal</span><span class="o">]</span> <span class="o">*</span> <span class="n">level</span><span class="o">[</span><span class="ss">:collected</span><span class="o">]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Pour pouvoir utiliser le code précédent, il faut ajouter quelques informations
au <em>game state</em> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Window</span> <span class="o">&lt;</span> <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:Window</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">game_state</span>
</span><span class="line">    <span class="p">{</span>
</span><span class="line">      <span class="ss">score</span><span class="p">:</span> <span class="vi">@player</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>
</span><span class="line">      <span class="ss">lives</span><span class="p">:</span> <span class="vi">@player</span><span class="o">.</span><span class="n">lives</span><span class="p">,</span>
</span><span class="line">      <span class="n">game_over</span><span class="p">:</span> <span class="vi">@game_over</span><span class="p">,</span>
</span><span class="line">      <span class="ss">level</span><span class="p">:</span> <span class="p">{</span>
</span><span class="line">        <span class="ss">goal</span><span class="p">:</span> <span class="vi">@level</span><span class="o">.</span><span class="n">goal</span><span class="p">,</span>
</span><span class="line">        <span class="ss">number</span><span class="p">:</span> <span class="vi">@level</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
</span><span class="line">        <span class="ss">collected</span><span class="p">:</span> <span class="vi">@level</span><span class="o">.</span><span class="n">collected</span><span class="p">,</span>
</span><span class="line">      <span class="p">},</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Et pour tester tout de suite, on triche un peu avec les méthodes <code>Level#goal</code> et
<code>Level#number</code> pour qu’elles retourne toujours une même chose qu’on contrôle
bien :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Level</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">goal</span>
</span><span class="line">    <span class="vi">@levels</span><span class="o">.</span><span class="n">first</span><span class="o">[</span><span class="s1">&#39;goal&#39;</span><span class="o">]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">number</span>
</span><span class="line">    <span class="s2">&quot;1&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Vous pouvez tester le jeu maintenant pour voir l’affichage du niveau et de
son état d’avancement.</p>

<h2 id="des-niveaux-enfin-">Des niveaux, enfin !</h2>

<p>On veut maintenant les faire fonctionner, ces niveaux ! Le gros du travail se
passe dans la classe <code>Level</code>. Notamment avec les méthodes <code>song</code>, <code>goal</code> et
<code>number</code> qui doivent désormais retourner des informations pertinentes sur le
niveau actuel.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Level</span>
</span><span class="line">  <span class="kp">attr_reader</span> <span class="ss">:collected</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span>
</span><span class="line">    <span class="vi">@levels</span> <span class="o">=</span> <span class="no">YAML</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s1">&#39;levels.yaml&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@collected</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">    <span class="vi">@index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">song</span>
</span><span class="line">    <span class="n">current</span> <span class="s1">&#39;song&#39;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">collect</span>
</span><span class="line">    <span class="vi">@collected</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">goal</span>
</span><span class="line">    <span class="n">current</span> <span class="s1">&#39;goal&#39;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">number</span>
</span><span class="line">    <span class="vi">@index</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">completed?</span>
</span><span class="line">    <span class="vi">@collected</span> <span class="o">==</span> <span class="n">goal</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">next</span>
</span><span class="line">    <span class="vi">@index</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">    <span class="vi">@index</span> <span class="sx">%= @levels.size</span>
</span><span class="line"><span class="sx">    @collected =</span> <span class="mi">0</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="kp">private</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">current</span><span class="p">(</span><span class="n">property</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@levels</span><span class="o">[</span><span class="vi">@index</span><span class="o">][</span><span class="n">property</span><span class="o">]</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Dans la méthode <code>Level#next</code>, le modulo permet de boucler sur les niveaux. Pas
très réaliste, mais ça permet de différer la gestion de la fin du jeu
(il se passe quoi quand on a terminé tout les niveaux ?).</p>

<p>Voici le code pour passer au niveau suivant :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Window</span> <span class="o">&lt;</span> <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:Window</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">update</span>
</span><span class="line">    <span class="n">reset</span> <span class="k">if</span> <span class="n">new_game?</span>
</span><span class="line">    <span class="n">next_level</span> <span class="k">if</span> <span class="vi">@level</span><span class="o">.</span><span class="n">completed?</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="kp">private</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">next_level</span>
</span><span class="line">    <span class="vi">@items</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class="line">    <span class="vi">@level</span><span class="o">.</span><span class="n">next</span>
</span><span class="line">    <span class="vi">@song_player</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="vi">@level</span><span class="o">.</span><span class="n">song</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Il faut aussi s’assurer qu’une nouvelle partie débute bien sur le premier
niveau :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Window</span> <span class="o">&lt;</span> <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:Window</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">reset</span>
</span><span class="line">    <span class="vi">@items</span> <span class="o">=</span> <span class="o">[]</span>
</span><span class="line">    <span class="vi">@player</span><span class="o">.</span><span class="n">reset</span>
</span><span class="line">    <span class="vi">@level</span><span class="o">.</span><span class="n">reset</span> <span class="c1"># &lt;----------------- C&#39;est ici que ça se passe !</span>
</span><span class="line">    <span class="vi">@song_player</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="vi">@level</span><span class="o">.</span><span class="n">song</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@game_over</span> <span class="o">=</span> <span class="kp">false</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Level</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">reset</span>
</span><span class="line">    <span class="vi">@collected</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">    <span class="vi">@index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Puis pour obtenir une transition moins abrupte entre les niveaux, on ajoute un
petit son :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Level</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="vi">@sound_next_level</span> <span class="o">=</span> <span class="ss">Gosu</span><span class="p">:</span><span class="ss">:Sample</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;assets/sound/next-level.wav&quot;</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">next</span>
</span><span class="line">    <span class="c1"># ...</span>
</span><span class="line">    <span class="vi">@sound_next_level</span><span class="o">.</span><span class="n">play</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Et voilà, nous avons maintenant des niveaux exploitables.
La prochaine fois nous étofferons ces niveaux, avec des bonus, des malus, etc.</p>

<p>Pour finir, voici le contenu du jeu pour l’instant:</p>

<pre><code>$ tree
.
├── assets
│   ├── fonts
│   │   └── VT323
│   │       ├── OFL.txt
│   │       └── VT323-Regular.ttf
│   ├── images
│   │   ├── background.png
│   │   ├── heart.gif
│   │   ├── player.png
│   │   ├── smiley-green.png
│   │   └── smiley-yellow.png
│   ├── songs
│   │   ├── Around the Bend.ogg
│   │   ├── Catch The Mystery.ogg
│   │   └── In early time.ogg
│   └── sound
│       ├── collect.wav
│       ├── life-lost.wav
│       └── next-level.wav
├── button.rb
├── collector_proxy.rb
├── level.rb
├── levels.yaml
├── main.rb
├── player.rb
├── smiley.rb
├── song_player.rb
├── ui.rb
├── window.rb
└── z_order.rb

6 directories, 24 files
</code></pre>

<p>Le code et les assets se trouvent <a href="https://github.com/lkdjiin/collect-the-smiles">sur Github</a>.
La version précise pour cet article est la <a href="https://github.com/lkdjiin/collect-the-smiles/releases/tag/v0.8.0">version 0.8.0</a>.</p>

<section><h1>Articles connexes</h1><ul /></section>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posté par <span class="fn">Xavier Nayrac</span></span>

      








  


<time datetime="2016-05-08T19:54:00+02:00" pubdate data-updated="true">8 mai 2016</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://lkdjiin.github.io/blog/2016/05/08/ecrire-un-jeu-en-2d-avec-ruby-et-gosu-partie-8/" data-via="lkdjiin" data-counturl="http://lkdjiin.github.io/blog/2016/05/08/ecrire-un-jeu-en-2d-avec-ruby-et-gosu-partie-8/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/05/01/ecrire-un-jeu-en-2d-avec-ruby-et-gosu-partie-7/" title="Previous Post: Écrire un jeu en 2d avec Ruby et Gosu - partie 7">&laquo; Écrire un jeu en 2d avec Ruby et Gosu - partie 7</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/08/02/12-points-pour-rater-la-conception-dun-mooc/" title="Next Post: 12 points pour rater la conception d'un MOOC">12 points pour rater la conception d'un MOOC &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Commentaires</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Articles récents</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/01/25/oui-la-documentation-est-utile/">Oui la documentation est utile</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/20/retour-sur-le-mooc-programmer-en-c/">Retour sur le MOOC Programmer en C</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/20/retour-du-mooc-designer-dans-un-fablab/">Retour du MOOC Designer dans un fablab</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/13/changer-de-shell-de-bash-a-fish/">Changer de shell, de Bash à Fish</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/11/11/bug-de-la-version-graphique-de-vim-sur-debian-sid/">Bug de la version graphique de Vim sur Debian Sid</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Sur Twitter</h1>
  <a class="twitter-timeline"  href="https://twitter.com/lkdjiin" data-widget-id="554992534532136960">Tweets de @lkdjiin</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
          
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Xavier Nayrac -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'confessionsdeveloppeur';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://lkdjiin.github.io/blog/2016/05/08/ecrire-un-jeu-en-2d-avec-ruby-et-gosu-partie-8/';
        var disqus_url = 'http://lkdjiin.github.io/blog/2016/05/08/ecrire-un-jeu-en-2d-avec-ruby-et-gosu-partie-8/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['\\(','\\)']]}
});
</script>
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>


</body>
</html>
