<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Catégorie : couverture de code | Xavier Nayrac]]></title>
  <link href="http://lkdjiin.github.io/blog/categories/couverture-de-code/atom.xml" rel="self"/>
  <link href="http://lkdjiin.github.io/"/>
  <updated>2015-07-20T17:10:55+02:00</updated>
  <id>http://lkdjiin.github.io/</id>
  <author>
    <name><![CDATA[Xavier Nayrac]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Sortie de coco 0.9]]></title>
    <link href="http://lkdjiin.github.io/blog/2014/02/11/sortie-de-coco-0-dot-9/"/>
    <updated>2014-02-11T20:40:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2014/02/11/sortie-de-coco-0-dot-9</id>
    <content type="html"><![CDATA[<p>La version 0.9 de la gem coco est sortie il y a quelques jours.
Coco est une bibliothèque de couverture de code (code coverage) pour
Ruby de 1.9.2 à 2.1.</p>

<!-- more -->

<p>Cette nouvelle version ajoute une option de configuration qui permet
de dire à <em>coco</em> quand démarrer, ou quand ne pas démarrer.</p>

<p>Pour les projets où la suite de tests met beaucoup de temps à tourner,
on fini souvent par jouer un seul test quand on développe, et la suite
entière seulement avant de commiter et/ou pusher. Dans ce cas, le
comportement de <em>coco</em> pouvait être assez agaçant puisque la gem
reportait une longue liste de fichiers non-couverts. Maintenant c’est
arrangé, mettez ceci dans votre fichier de configuration:</p>

<pre><code>:always_run: false
</code></pre>

<p>Lorsque vous lancez les tests comme d’habitude (ou <code>rake</code>, ou un
seul fichier, etc):</p>

<pre><code>rspec spec/
</code></pre>

<p><em>Coco</em> ne démarrera pas. Pour lui dire de faire son travail, il suffit
de définir la variable d’environnement <code>COCO</code>:</p>

<pre><code>COCO=1 rspec spec/
</code></pre>

<p>Vous pouvez <a href="https://github.com/lkdjiin/coco">télécharger</a> coco sur Github.</p>

<script id="fb33k8u">(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=lkdjiin&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=62;f.width=55;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fb33k8u');</script>

<p>À demain.</p>

<p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sortie de coco 0.8]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/12/25/sortie-de-coco-0-dot-8/"/>
    <updated>2013-12-25T19:23:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/12/25/sortie-de-coco-0-dot-8</id>
    <content type="html"><![CDATA[<p>La version 0.8 de la gem coco est sortie il y a quelques jours.
Coco est une bibliothèque de couverture de code (<em>code coverage</em>) pour
Ruby.</p>

<!-- more -->

<p>Cette nouvelle version est essentiellement cosmétique. Elle améliore le
visuel de la page d’index du rapport Html, et supprime le besoin des
fichiers CSS de Yahoo!</p>

<p><img src="/images/Capture-4.png"></p>

<p>Vous pouvez <a href="https://github.com/lkdjiin/coco">télécharger coco</a> depuis Github, ou l’installer directement:</p>

<pre><code>gem install coco
</code></pre>

<p>À demain.</p>

<p></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Couverture de code pour Ruby avec coco]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/10/26/couverture-de-code-pour-ruby-avec-coco/"/>
    <updated>2013-10-26T18:07:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/10/26/couverture-de-code-pour-ruby-avec-coco</id>
    <content type="html"><![CDATA[<p>Il y a 3 ans, j’ai écrit une gem Ruby pour faire de la couverture de
code (<em>code coverage</em>). <a href="https://github.com/colszowka/simplecov">SimpleCov</a>,
la gem la plus utilisée pour cette tâche venait tout juste de voir le
jour et ne me convenait pas entièrement. À l’époque je trouvais SimpleCov
trop ennuyeuse à configurer et à faire fonctionner.</p>

<!-- more -->

<p>Qu’on ne me fasse pas dire ce que je n’ai pas écrit : SimpleCov remplie
<em>parfaitement</em> sa tâche. C’est juste que je voulais un truc plus simple.
Je voulais quelque chose qui fonctionne en une ligne, avec configuration
optionnelle et surtout, avec un rapport de couverture
super simple et dépouillé. C’est comme ça qu’est née la gem
<a href="https://github.com/lkdjiin/coco">coco</a>. Bon ok, il m’est arrivé de me
demander si je ne l’avais pas écrit juste pour le jeu de mot…</p>

<p>Pour utiliser coco, il suffit de charger la gem au tout début des tests
comme ceci:</p>

<p><code>ruby
require 'coco'
</code></p>

<p>Et… c’est tout ! Chaque fois que vous lancerez les tests, coco produira un
rapport si (et seulement si) au moins un fichier n’est pas couvert à 100%.</p>

<p>La configuration, au besoin, se fait dans un fichier caché au format yaml,
à la racine du projet. Par exemple si vous trouvez qu’un taux de couverture
de 90% est acceptable, vous pouvez le changer comme ça:</p>

<pre><code>:threshold: 90
</code></pre>

<p>Si vous voulez exclure un fichier et un dossier complet du rapport vous
pouvez écrire:</p>

<pre><code>:excludes:
- lib/project/file1.rb
- config/initializers
</code></pre>

<p>Il y a plusieurs autres exemples de configuration sur le
<a href="https://github.com/lkdjiin/coco/wiki">wiki du projet</a>. Enfin, pour une
présentation rapide de coco, en anglais, il y a le
<a href="http://lkdjiin.github.io/coco/">site web</a>.</p>

<script id="fb33k8u">(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=lkdjiin&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=62;f.width=55;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fb33k8u');</script>

<p>À demain.</p>

<p></p>

]]></content>
  </entry>
  
</feed>
