<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Catégorie : environnement | lkdjiin's blog]]></title>
  <link href="http://lkdjiin.github.io/blog/categories/environnement/atom.xml" rel="self"/>
  <link href="http://lkdjiin.github.io/"/>
  <updated>2014-06-12T21:15:01+02:00</updated>
  <id>http://lkdjiin.github.io/</id>
  <author>
    <name><![CDATA[Xavier Nayrac]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Astuce Ruby - Utiliser les variables d'environnement]]></title>
    <link href="http://lkdjiin.github.io/blog/2014/02/07/astuce-ruby-utiliser-les-variables-denvironnement/"/>
    <updated>2014-02-07T20:47:00+01:00</updated>
    <id>http://lkdjiin.github.io/blog/2014/02/07/astuce-ruby-utiliser-les-variables-denvironnement</id>
    <content type="html"><![CDATA[<p><div class='level-tag level-tag-1'>Niveau : <span>facile</span></div></p>

<p>Pour un projet en cours, je dois accéder à une variable d'environnement
passée par la ligne de commande. Voici comment faire, et pourquoi le
faire.</p>

<!-- more -->


<h2>Comment faire ?</h2>

<p>Dans Ruby, on accède aux variables d'environnement à l'aide
du hash <code>ENV</code>. Pour créer une variable d'environnement qui ne sera
connue que de votre programme, il faut
l'affecter avant la commande:</p>

<p>``` irb
$ MYVAR=1 irb</p>

<blockquote><blockquote><p>p ENV[&lsquo;MYVAR&rsquo;]
&ldquo;1&rdquo;
exit
```</p></blockquote></blockquote>

<p>La syntaxe suivante crée une variable d'environnement avec une chaîne
vide:</p>

<p>``` irb
$ MYVAR= irb</p>

<blockquote><blockquote><p>p ENV[&lsquo;MYVAR&rsquo;]
&ldquo;&rdquo;
```</p></blockquote></blockquote>

<p>Une variable d'environnement inexistante renverra <code>nil</code>:</p>

<p>``` irb
$ irb</p>

<blockquote><blockquote><p>ENV[&lsquo;MYVAR&rsquo;]
nil
```</p></blockquote></blockquote>

<h2>Pourquoi faire ?</h2>

<p>Pour prendre des décisions qui ne sont connues
qu'au lancement du programme, on se sert normalement des options en
ligne de commande, du genre:</p>

<pre><code>$ foo -a --bar
</code></pre>

<p>Mais quand un programme A est lancé par un autre programme B, ou
bien par le
déclenchement du programme B, on n'a pas forcement la possibilité
d'ajouter des options au programme A. Dans ce cas les variables
d'environnement sont une solution.</p>

<script id='fb33k8u'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=lkdjiin&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=62;f.width=55;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fb33k8u');</script>


<p>À demain.</p>

<p></p>
]]></content>
  </entry>
  
</feed>
