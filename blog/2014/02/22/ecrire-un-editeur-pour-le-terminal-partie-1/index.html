<!DOCTYPE html>
<html lang="fr"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://lkdjiin.github.io/atom.xml" title="Xavier Nayrac" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Xavier Nayrac</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">À propos</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Écrire un éditeur pour le terminal - partie 1</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2014-02-22T15:14:00+01:00" itemprop="datePublished">22 February 2014
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Après avoir parler quelque peu de ncurses, on passe à la première étape
de l’écriture d’un éditeur qui ressemblerait à Vim: afficher le contenu
d’un fichier.</p>

<!-- more -->

<p>Le progamme est très proche de ce qu’on avait obtenu
<a href="/blog/2014/02/16/curses-et-ncurses-en-ruby/">la dernière fois</a>,
et pour cause, la seule différence étant l’ouverture/affichage du
fichier passé en argument:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">require</span> <span class="s1">'ffi-ncurses'</span>
<span class="kp">include</span> <span class="no">FFI</span><span class="o">::</span><span class="no">NCurses</span>

<span class="n">file</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">open</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">begin</span>
  <span class="n">initscr</span>
  <span class="n">file</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span><span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="n">printw</span> <span class="n">line</span> <span class="p">}</span>
  <span class="n">refresh</span>
  <span class="n">getch</span>
<span class="k">ensure</span>
  <span class="n">endwin</span>
<span class="k">end</span></code></pre></figure>

<p>N’oubliez pas de donner les droits d’exécution à ce programme:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod +x redvim.rb
</code></pre></div></div>

<p>Et lancez-le ainsi pour qu’il s’affiche lui-même:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./redvim.rb redvim.rb
</code></pre></div></div>

<p>Si vous essayez de lui faire afficher un fichier trop long pour tenir
dans le terminal, il va se passer des choses bizarres. On corrigera
ça plus tard. Pour l’instant notre programme affiche un fichier, c’est
déjà le début de la gloire ;)</p>

<p>À demain.</p>


  </div>

  <br/>
  <br/>
  <div style="text-align: center">/ / / / / / / / / /</div>
  <br/>
  <br/>

  <div style="text-align: center">
    
      <a href="/blog/2014/02/21/lauto-completion-programmable-en-bash-partie-11/" title="Article précédent: L'auto-complétion programmable en Bash - partie 11">&laquo; L'auto-complétion programmable en Bash - partie 11</a> ---//---
    
    
      <a href="/blog/2014/02/23/ecrire-un-editeur-pour-le-terminal-partie-2/" title="Article suivant: Écrire un éditeur pour le terminal - partie 2">Écrire un éditeur pour le terminal - partie 2 &raquo;</a>
    
  </div>

  <br/>
  <br/><a class="u-url" href="/blog/2014/02/22/ecrire-un-editeur-pour-le-terminal-partie-1/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div>
    <p class="rss-subscribe">s'abonner <a href="/atom.xml">via RSS</a></p>
    </div>

    <h2 class="footer-heading">Xavier Nayrac</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">
            Copyright 2013 - 2025
            </li><li><a class="u-email" href="mailto:"></a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list">

  <li style="margin-bottom:10px;">
    <a href="https://github.com/lkdjiin">
      <img src="/images/github.png" />
      <span class="username">lkdjiin</span>
    </a>
  </li>

  <li style="margin-bottom:10px;">
    <a href="https://ruby.social/@lkdjiin">
      <img src="/images/mastodon.png" />
      <span class="username">lkdjiin</span>
    </a>
  </li>

  <li style="margin-bottom:10px;">
    <a href="/atom.xml">
      <img src="/images/atom.png" />
      <span class="username">RSS</span>
    </a>
  </li>
</ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Dev accro au TDD, brasseur d&#39;appartement, musicien, maker, ex créateur d&#39;effets pour guitare, heureux utilisateur de Vim.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
